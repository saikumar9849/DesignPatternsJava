Lyte.Component.register("dots-loading",{_template:'<template tag-name="dots-loading"> <div class="loading-wrap {{if(whiteDots,\'white-dots\')}} {{if(supportNightMode,\'support-night-mode\')}}"> <div id="dot-one" style="width : {{circleDiameter}}; height : {{circleDiameter}}" class="each-dot"> </div> <div id="dot-two" style="width : {{circleDiameter}};height : {{circleDiameter}}" class="each-dot"> </div> <div id="dot-three" style="width : {{circleDiameter}};height : {{circleDiameter}}" class="each-dot"> </div> </div> </template>\n<style>.loading-wrap {\n\tposition: absolute;\n\ttop : 0;\n    left: 0;\n    right : 0;\n    bottom: 0;\n\twidth : 50px;\n\theight: 6px;\n\tmargin: auto;\n}\n\n.loading-wrap .each-dot {\n\tbackground-color: #000000;\n\tposition: absolute;\n\tborder-radius: 50%;\n\twidth: 7px;\n\theight: 7px;\n\n\t-webkit-animation: loading-dots 1.3s infinite;\n\t-webkit-animation-fill-mode: both;\n\n\t-o-animation: loading-dots 1.3s infinite;\n\t-o-animation-fill-mode: both;\n\n\t-moz-animation: loading-dots 1.3s infinite;\n\t-moz-animation-fill-mode: both;\n\n\tanimation: loading-dots 1.3s infinite;\n\tanimation-fill-mode: both;\n}\n\n.night-mode .support-night-mode .each-dot, .contrast-mode .support-night-mode .each-dot {\n    background-color: #FFFFFF;\n}\n\n\n\n.loading-wrap.white-dots .each-dot {\n    background-color: #FFFFFF;\n}\n\n#dot-one {\n\tleft : 0;\n\ttop : 0;\n}\n\n#dot-two {\n\tleft : 17px;\n\ttop : 0;\n\t-o-animation-delay: 0.3s;\n\t-moz-animation-delay: 0.3s;\n\t-webkit-animation-delay: 0.3s;\n\tanimation-delay: 0.3s;\n}\n\n#dot-three {\n\tleft : 34px;\n\t-o-animation-delay: 0.5s;\n\t-moz-animation-delay: 0.5s;\n\t-webkit-animation-delay: 0.5s;\n\tanimation-delay: 0.5s;\n}\n\n@-webkit-keyframes loading-dots {\n\t0% {\n\t\t-webkit-transform: scale(1);\n    \t-moz-transform: scale(1);\n    \t-ms-transform: scale(1);\n    \t-o-transform: scale(1);\n    \ttransform: scale(1);\n\t}\n\t20% {\n\t\t-webkit-transform: scale(1.3);\n    \t-moz-transform: scale(1.3);\n    \t-ms-transform: scale(1.3);\n    \t-o-transform: scale(1.3);\n    \ttransform: scale(1.3);\n\t}\n\t50% {\n\t\t-webkit-transform: scale(1);\n    \t-moz-transform: scale(1);\n    \t-ms-transform: scale(1);\n    \t-o-transform: scale(1);\n    \ttransform: scale(1);\n\t}\n}\n\n@-moz-keyframes loading-dots {\n\t0% {\n\t\t-webkit-transform: scale(1);\n    \t-moz-transform: scale(1);\n    \t-ms-transform: scale(1);\n    \t-o-transform: scale(1);\n    \ttransform: scale(1);\n\t}\n\t20% {\n\t\t-webkit-transform: scale(1.3);\n    \t-moz-transform: scale(1.3);\n    \t-ms-transform: scale(1.3);\n    \t-o-transform: scale(1.3);\n    \ttransform: scale(1.3);\n\t}\n\t50% {\n\t\t-webkit-transform: scale(1);\n    \t-moz-transform: scale(1);\n    \t-ms-transform: scale(1);\n    \t-o-transform: scale(1);\n    \ttransform: scale(1);\n\t}\n}\n\n@-o-keyframes loading-dots {\n\t0% {\n\t\t-webkit-transform: scale(1);\n    \t-moz-transform: scale(1);\n    \t-ms-transform: scale(1);\n    \t-o-transform: scale(1);\n    \ttransform: scale(1);\n\t}\n\t20% {\n\t\t-webkit-transform: scale(1.3);\n    \t-moz-transform: scale(1.3);\n    \t-ms-transform: scale(1.3);\n    \t-o-transform: scale(1.3);\n    \ttransform: scale(1.3);\n\t}\n\t50% {\n\t\t-webkit-transform: scale(1);\n    \t-moz-transform: scale(1);\n    \t-ms-transform: scale(1);\n    \t-o-transform: scale(1);\n    \ttransform: scale(1);\n\t}\n}\n\n@keyframes loading-dots {\n\t0% {\n\t\t-webkit-transform: scale(1);\n    \t-moz-transform: scale(1);\n    \t-ms-transform: scale(1);\n    \t-o-transform: scale(1);\n    \ttransform: scale(1);\n\t}\n\t20% {\n\t\t-webkit-transform: scale(1.3);\n    \t-moz-transform: scale(1.3);\n    \t-ms-transform: scale(1.3);\n    \t-o-transform: scale(1.3);\n    \ttransform: scale(1.3);\n\t}\n\t50% {\n\t\t-webkit-transform: scale(1);\n    \t-moz-transform: scale(1);\n    \t-ms-transform: scale(1);\n    \t-o-transform: scale(1);\n    \ttransform: scale(1);\n\t}\n}\n</style>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'width : '","circleDiameter","'; height : '","circleDiameter"]}}}},{type:"attr",position:[1,3],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'width : '","circleDiameter","';height : '","circleDiameter"]}}}},{type:"attr",position:[1,5],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'width : '","circleDiameter","';height : '","circleDiameter"]}}}}],_observedAttributes:["backgroundColor","whiteDots","supportNightMode"],data:function(){return{backgroundColor:Lyte.attr("string",{default:""}),whiteDots:Lyte.attr("boolean",{default:!1}),supportNightMode:Lyte.attr("boolean",{default:!1})}},bgColorObserver:function(){let t=this.getData("backgroundColor");var e=!1;"#ffffff"===getTextColor(t).toLowerCase()&&(e=!0),this.setData("whiteDots",e)}.observes("backgroundColor").on("init")}),Lyte.Component.register("editor-container",{_template:'<template tag-name="editor-container"> <template is="if" value="{{expHandlers(hideHeader,\'!\')}}"><template case="true"> <div id="top-bar"> <div class="notebook-icon"> <div id="notebook-logo"></div> </div> <div id="modified-time-wrap"> <div id="modified-time-div"> {{translate("generalOption.lastEdited")}} : {{formatdate(notecard.modified_time,\'notecard_grid\')}} </div> <div id="refresh-icon" onclick="{{action(\'refreshContent\')}}" ontouchstart="{{action(\'refreshContent\')}}"></div> </div> </div> </template></template> <div class="spread-parent editor-shadow {{if(hideHeader,\'top-0\',\'top-normal\')}} {{if(isEmbedView,\'left-0 right-0\')}}" style="{{backgroundcolorstyle(notecard.color,defaultColor)}}"> <template is="component" component-name="{{editorType}}" notecard="{{lbind(notecard)}}" text-color-black="{{textColorBlack}}" is-embed-view="{{lbind(isEmbedView)}}"> </template> </div> <alert-box> </alert-box> <div id="toast-message"> <div id="toast-message-text"></div> </div> <template is="if" value="{{expHandlers(expHandlers(hideHeader,\'!\'),\'&amp;&amp;\',expHandlers(hideReportAbuseOption,\'!\'))}}"><template case="true"> <div id="report-container"> <div onclick="{{action(\'reportAbuse\')}}"> <div id="report-icon"></div> <div id="report-label">{{translate("generalOption.reportAbuse")}}</div> </div> <div class="inote-option-half inote-option-black close-icon-half report-abuse-close" onclick="{{action(\'hideReportAbuse\')}}"></div> </div> </template></template> <template is="if" value="{{showReportAbuse}}"><template case="true"> <report-abuse-dialog></report-abuse-dialog> </template></template> </template>\n<style>html,body {\n    /* overflow: hidden; */\n    font-family: \'Lato\';\n    position: relative;\n    height: 100%;\n    width: 100%;\n    margin: 0;\n}\n\n#outlet a {\n    text-decoration: underline;\n    cursor: pointer;\n    color: inherit!important;\n    font-style: italic;\n}\n\n.transparent-overlay {\n    z-index: 11;\n}\n\n.imgWrapperDiv img{\n    max-width : 100%;\n    max-height: 100%;\n}\n\n\n.editor-space {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin-left: 10%;\n    margin-right: 10%;\n    overflow: auto;\n}\n\n\n.spread-parent {\n    position: absolute;\n    left: 15%;\n    right: 15%;\n    bottom: 0;\n    z-index: 10;\n}\n\n.spread-parent.top-normal {\n    top: 80px;\n}\n\n.spread-parent.top-0{\n    top : 0px;\n}\n\n.spread-parent.left-0 {\n    left: 0;\n}\n\n.spread-parent.right-0 {\n    right: 0;\n}\n\n.add-new-text {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    text-align: center;\n    line-height: 40px;\n    font-size: 18px;\n    margin-top: -30px;\n\n    -webkit-transform: translate(-50%, -50%);\n    -moz-transform: translate(-50%, -50%);\n    -ms-transform: translate(-50%, -50%);\n    -o-transform: translate(-50%, -50%);\n    transform: translate(-50%, -50%);\n}\n\n.editor-body {\n    position: absolute;\n    top: 60px;\n    bottom: 40px;\n    left: 0;\n    right: 0;\n}\n\n.editor-footer {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    min-height: 40px;\n    text-align: center;\n /*   border-top: solid 1px rgba(255, 255, 255, 0.2);*/\n}\n\n.editor-body .dragoverlay {\n    background-color: transparent;\n    border: 1.5px dashed #212121;\n    opacity: 0;\n    visibility: hidden;\n\n    -webkit-transition: all 300ms ease-out;\n    -moz-transition: all 300ms ease-out;\n    -o-transition: all 300ms ease-out;\n    -ms-transition: all 300ms ease-out;\n    transition: all 300ms ease-out;\n}\n\n.editor-body .dragoverlay.white-border {\n    border: 1.5px dashed #FFFFFF;\n}\n\n.editor-body .dragoverlay.show {\n    opacity: 1;\n    visibility: visible;\n}\n\n.card-title {\n    position: absolute;\n    top: 24px;\n    left: 10%;\n    right: 10%;\n    height: 40px;\n    text-align: center;\n\tfont-size: 22px;\n    line-height: 40px;\n    font-family: \'Noto Sans\', sans-serif;\n    font-weight: bold;\n}\n\n.card-title div {\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n}\n\n.content {\n    position: absolute;\n    top: 80px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    font-size: 18px;\n    overflow: auto;\n    padding-bottom: 40px;\n    line-height: 1.75em;\n    word-break: break-word;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-overflow-scrolling: touch;\n}\n\n.content::-webkit-scrollbar{\n    display:none;\n    /*Safari and Chrome;*/\n}\n\n.checklist-content {\n    left: 0;\n    padding-right: 0;\n    padding-bottom: 0;\n}\n\n.content p:not(.zne-block p),\n.content th:not(.zne-block th),\n.content td:not(.zne-block td),\n.content dd:not(.zne-block dd),\n.content dt:not(.zne-block dt),\n.content blockquote:not(.zne-block blockquote),\n.content q:not(.zne-block q),\n.content acronym:not(.zne-block acronym),\n.content abbr:not(.zne-block abbr),\n.content a:not(.zne-block a) {\n    margin-top: 1em;\n\tmargin-bottom: 1em;\n}\n\n.content ul:not(.zne-block ul), .content ol:not(.zne-block ol) {\n\t -webkit-margin-before: 1em;\n\t -webkit-margin-after: 1em;\n\t -webkit-margin-start: 0px;\n\t -webkit-margin-end: 0px;\n\t /*-webkit-padding-start: 40px;*/\n}\n\n#close-versions {\n    position: absolute;\n    top: 16px;\n    right: 16px;\n    z-index: 25;\n}\n.editor-overlay {\n    z-index: 9;\n}\n\n.strikethrough {\n    text-decoration: line-through;\n}\n\n.dimmer {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    visibility: hidden;\n    opacity: 0;\n\n    -webkit-transition: all 300ms ease-out;\n    -moz-transition: all 300ms ease-out;\n    -o-transition: all 300ms ease-out;\n    -ms-transition: all 300ms ease-out;\n    transition: all 300ms ease-out;\n}\n\n.checkBox {\n\tmargin: 0.4em 8px 0 0!important;\n    width: 12px;\n    height: 12px;\n    display: inline-block!important;\n    -webkit-appearance: none;\n    appearance: none;\n    -moz-appearance: none;\n    background-image: url("/public/icon-assets/checkbox-sprite.png");\n    background-size: 24px 24px;\n    cursor: pointer;\n}\n\n.checkBox {\n    background-image: url("/public/icon-assets/checkbox-sprite@2x.png");\n}\n\n.checkBox:checked {\n\tbackground-position: 0px -12px!important;\n\topacity: 0.6;\n}\n\n.checked {\n\tbackground-position: 0px -12px!important;\n}\n.white-checkbox {\n\tbackground-position: -12px 0px!important;\n}\n\n.white-checkbox.checked {\n\tbackground-position: -12px -12px!important;\n}\n\n.white-checkbox:checked {\n\tbackground-position: -12px -12px!important;\n}\n\n.checkBox:checked + *{\n\topacity: 0.6;\n}\n\n.image-editor-wrap {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n}\n\n#modified-time-wrap {\n    position: absolute;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    font-size: 14px;\n    color: #666;\n}\n\n#modified-time-div {\n    display: inline-block;\n    line-height: 48px;\n    height: 48px;\n    vertical-align: top;\n}\n\n#refresh-icon {\n    background-image: url("../icon-assets/public-icn-refresh.png");\n    background-size: 24px 24px;\n    cursor: pointer;\n    height: 24px;\n    width: 24px;\n    position: relative;\n    display: inline-block;\n    margin: 12px 8px;\n}\n\n#report-icon {\n    background-image: url("../icon-assets/icn-flag-abuse.png");\n    background-size: 16px;\n    cursor: pointer;\n    height: 16px;\n    width: 16px;\n    position: relative;\n    margin: 12px 0 12px 12px;\n    display: inline-block;\n}\n\n.editor-shadow {\n    -webkit-box-shadow: 0 1px 2px 0 rgba(0,0,0,0.25);\n    box-shadow: 0 1px 2px 0 rgba(0,0,0,0.25);\n    -moz-box-shadow: 0 1px 2px 0 rgba(0,0,0,0.25);\n}\n\n.zero-top {\n    top: 8px;\n}\n\n#report-container {\n    background-color: white;\n    height: 40px;\n    position: fixed;\n    right: 24px;\n    bottom: 30px;\n    font-size: 16px;\n    cursor: pointer;\n    box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.15);\n    border-radius: 5px;\n    z-index: 10;\n    display: flex;\n    justify-content: space-between;\n}\n\n[editor-type="video-note-view"] #report-container {\n    bottom: 2px !important;\n}\n\n#report-label {\n    line-height: 40px;\n    display: inline-block;\n    vertical-align: top;\n    margin: 0 8px 0 4px;\n    font-size: 14px;\n}\n\n.report-abuse-close {\n    margin-top: 4px;\n    margin-right: 4px;\n}\n\n.report-abuse-close:hover {\n    transform: scale(1.1);\n}\n\n@media only screen and (min--moz-device-pixel-ratio: 2),\n\t   only screen and (-o-min-device-pixel-ratio: 2/1),\n\t   only screen and (-webkit-min-device-pixel-ratio: 2),\n\t   only screen and (min-device-pixel-ratio: 2)  {\n\n   #report-icon {\n       background-image: url("../icon-assets/icn-flag-abuse@2x.png");\n\t}\n\n    #refresh-icon {\n        background-image: url("../icon-assets/public-icn-refresh@2x.png");\n    }\n\n}\n\n/* Smartphones ----------- */\n@media screen and (max-device-width : 767px) {\n    body {\n        -webkit-overflow-scrolling: touch;\n    }\n\n    .spread-parent {\n        left: 0!important;\n        right: 0!important;\n    }\n\n    .spread-parent.top-normal {\n        top: 48px!important;\n        bottom: 48px!important;\n    }\n\n    .spread-parent.top-0{\n        top : 0px!important;\n        bottom: 0px!important;\n    }\n\n    #checklist-editor {\n        margin-left: 24px!important;\n        margin-right: 24px!important;\n    }\n\n    #report-container {\n        position: fixed;\n        left: 0;\n        right: 0;\n        border-radius: unset;\n        bottom: 0;\n        text-align: center;\n        background-color: #f7f7f7;\n    }\n\n    [editor-type="video-note-view"] #report-container {\n        bottom: 2px !important;\n    }\n\n    #file-editor, #bookmark-editor {\n        bottom: 40px!important;\n    }\n\n    .content, #checklist-editor-div, #bookmark-editor {\n        overflow: unset!important;\n    }\n\n    .editor-shadow {\n        -webkit-box-shadow: none!important;\n        box-shadow: none!important;\n        -moz-box-shadow: none!important;\n    }\n\n    #checked-checkbox-array {\n        padding-bottom: 48px!important;\n    }\n\n}\n\n/* iPads (portrait) ----------- */\n@media (min-device-width: 768px) and (orientation: portrait) {\n\n    .spread-parent {\n        left: 0!important;\n        right: 0!important;\n    }\n\n    .spread-parent.top-normal {\n        top: 48px!important;\n        bottom: 48px!important;\n    }\n\n    .spread-parent.top-0{\n        top : 0px!important;\n        bottom: 0px!important;\n    }\n\n    #checklist-editor {\n        margin-left: 24px!important;\n        margin-right: 24px!important;\n    }\n\n    #report-container {\n        position: fixed;\n        left: 0;\n        right: 0;\n        border-radius: unset;\n        bottom: 0;\n        text-align: center;\n        background-color: #f7f7f7;\n    }\n\n    [editor-type="video-note-view"] #report-container {\n        bottom: 2px !important;\n    }\n\n    #file-editor, #bookmark-editor {\n        bottom: 40px!important;\n    }\n\n    .content, #checklist-editor-div, #bookmark-editor {\n        overflow: unset!important;\n    }\n\n    body {\n        -webkit-overflow-scrolling: touch;\n    }\n\n    .editor-shadow {\n        -webkit-box-shadow: none!important;\n        box-shadow: none!important;\n        -moz-box-shadow: none!important;\n    }\n\n    #checked-checkbox-array {\n        padding-bottom: 48px!important;\n    }\n\n}\n</style>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,3,1,1]},{type:"text",position:[1,3,1,3]},{type:"attr",position:[1,3,3]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"backgroundcolorstyle",args:["notecard.color","defaultColor"]}}}},{type:"attr",position:[3,1]},{type:"component",position:[3,1],dynamicNodes:[]},{type:"componentDynamic",position:[5]},{type:"attr",position:[9]},{type:"if",position:[9],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,3,0]},{type:"attr",position:[1,3]}]}},default:{}},{type:"attr",position:[11]},{type:"if",position:[11],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["notecard","hideClose","annotatingImage","isImageCard","isCheckListCard","isAudioCard","isFileCard","notebooksList","descriptionText","refreshEditor","showParentBook","editorType","defaultColor","textColorBlack","textColor","showReportAbuse","hideHeader","hideReportAbuseOption","isEmbedView"],data:function(){return{notecard:Lyte.attr("object",{default:{}}),hideClose:Lyte.attr("boolean",{default:!1}),annotatingImage:Lyte.attr("boolean",{default:!1}),isImageCard:Lyte.attr("boolean",{default:!1}),isCheckListCard:Lyte.attr("boolean",{default:!1}),isAudioCard:Lyte.attr("boolean",{default:!1}),isFileCard:Lyte.attr("boolean",{default:!1}),notebooksList:Lyte.attr("string",{default:""}),descriptionText:Lyte.attr("string",{default:""}),refreshEditor:Lyte.attr("boolean",{default:!1}),showParentBook:Lyte.attr("boolean",{default:!1}),editorType:Lyte.attr("string",{default:"text-note-view"}),defaultColor:Lyte.attr("string",{default:""}),textColorBlack:Lyte.attr("boolean",{default:!1}),textColor:Lyte.attr("string",{default:""}),showReportAbuse:Lyte.attr("boolean",{default:!1}),hideHeader:Lyte.attr("boolean",{default:!1}),hideReportAbuseOption:Lyte.attr("boolean",{default:!1}),isEmbedView:Lyte.attr("boolean",{default:!1})}},editorTypeObserver:function(){var t="text-note-view",e=this.getData("notecard").type,n="";switch(e){case"note/text":t="text-note-view";break;case"note/image":case"note/document":n="#333333","note/document"===e&&(n="#FFFFFF"),t="image-note-view";break;case"note/checklist":t="checklist-note-view";break;case"note/file":n="#FFFFFF",t="file-note-view";break;case"note/video":n="#1C1C1C",t="video-note-view";break;case"note/audio":t="audio-note-view";break;case"note/sketch":n="#FFFFFF",t="sketch-note-view";break;case"note/bookmark":n="#FFFFFF",t="bookmark-note-view";break;case"note/contact":t="contact-note-view"}this.setData("defaultColor",n),this.setData("editorType",t)}.observes("notecard.type").on("init"),notecardColorObserver:function(){var t,e=this.getData("notecard"),n=this.getData("defaultColor");isValidString(n)||(n=e.color),void 0!==n&&(n=n.toLowerCase());var i=getTextColor(n);t="#ffffff"!==i,this.setData("textColor",i),this.setData("textColorBlack",t),"note/file"===e.type&&this.setData("textColorBlack",!1)}.observes("notecard.color","defaultColor").on("init"),didConnect:function(){if(this.openEditorModal(),isMobileBrowser()){var t=this.getData("notecard"),e=this.getData("defaultColor");isValidString(e)||(e=t.color),document.body.style.backgroundColor=e}else document.body.style.backgroundColor="#F7F7F7"},didDestroy:function(){removeEventsForVideo()},actions:{transparentOverlay:function(){if(!this.getData("displayVersions"))return this.setData("shrinkEditor",!1),this.hideChooseBookMixin(!0),Lyte.triggerEvent(GLOBAL_EVENT.get("HIDE_NOTE_INFO")),!1},alertDimmer:function(t){Lyte.triggerEvent("alertDimmerClick",t)},refreshContent:function(){var t=this.getData("notecard"),e=this;getPublicNotecardDetailsNR(t.notecard_id,!0).then(function(t){var n=JSON.parse(t);if("success"===n.status.toLowerCase()){var i=n;downloadNotecardNR(i.notecard_id).then(function(t){"object"==typeof t&&(t.code||(i.contentXML=t,e.setData("notecard",i)))}).catch(function(t){})}return null})},reportAbuse:function(){var t=this.getData("showReportAbuse");this.setData("showReportAbuse",!t)},hideReportAbuse:function(){this.setData("hideReportAbuseOption",!0)}},openEditorModal:function(){var t=this;setTimeout(function(){t.setData("openEditor",!0)},10)}},{mixins:["card-util","reminder-util"]}),Lyte.Component.register("text-note-view",{_template:"<template tag-name=\"text-note-view\"> <div class=\"text-editor-wrap\"> <div class=\"editor-space editor\" id=\"text-editor\"> <div id=\"note-editor\" class=\"{{if(textColorBlack,'','white_tb')}}\"> <div class=\"card-title\"> <div> {{unescape(replacewithifempty(notecard.name,'','untitled'))}} </div> </div> <div class=\"content {{if(hasTitle,'','zero-top')}}\"> {{unescape(parsedHtml,undefined,sanitizer.attr)}} </div> </div> </div> </div> </template>\n<style>\n.checklist{\n    list-style-type:none;\n}\n\n/* .checklist li {\n    clear: both;\n} */\n\n.checklist li::before{\n    content:''; /*url('../../editor/images/checkbox-inactive.png'); */\n    margin:2px 8px;\n    cursor:pointer;\n    float: left;\n    height: 24px;\n    width: 12px;\n    background: url('/public/icon-assets/checkbox-inactive.png') no-repeat center left;\n}\n\n.white_tb .checklist li::before {\n    content:''!important;\n    background: url('/public/icon-assets/checkbox-inactive-white.png') no-repeat center left!important;\n}\n\n.white_cl li::before{\n    content:'';\n    margin:2px 8px;\n    cursor:pointer;\n    background: url('/public/icon-assets/checkbox-inactive-white.png') no-repeat center left!important;\n\n}\n.checklist li.checked::before{\n    content:'';\n    margin:2px 8px;\n    cursor:pointer;\n    background: url('/public/icon-assets/checkbox-active.png') no-repeat center left!important;\n}\n\n.white_tb .checklist li.checked::before {\n    content:'';\n    background: url('/public/icon-assets/checkbox-active-white.png') no-repeat center left!important;\n}\n\n.white_cl li.checked::before{\n    content: '';\n    background: url('/public/icon-assets/checkbox-active-white.png') no-repeat center left!important;\n    margin:2px 8px;\n    cursor:pointer;\n}\n\n.white_cl{\n    list-style-type:none;\n}\n\n.checklist li.checked{\n    opacity:.6;\n}\n\n.checkbox>div{\n    display:inline-block;\n    position:relative;\n    width:95%;\n    width:calc(100% - 40px);\n    /* float:right; */\n    margin-left: 8px;\n}\n\n.highlight {\n    background-color: #000000!important;\n    color : #FFFFFF!important;\n    padding: 0 1px;\n}\n.white_tb .highlight {\n    background-color : #FFFFFF!important;\n    color : #000000!important;\n}\n\nhr {\n    display: block;\n    height: 1px;\n    border: 0;\n    border-top: 1px solid #212121;\n    margin: 1em 0;\n    padding: 0;\n}\n\n.white_tb hr {\n    border-top: 1px solid #FFFFFF;\n}\n\n.audioPlayIcon{\n    background-image:url(\"/public/icon-assets/editor-audio-control-fill.png\");\n    height:40px;\n    width:40px;\n    background-position:0 0;\n    cursor:pointer;\n    position:absolute;\n    top:50%;\n    margin-top:-20px;\n    left:50%;\n    margin-left:-20px;\n    z-index:10;\n}\n\n@media only screen and(-webkit-min-device-pixel-ratio:2),only screen and(min-device-pixel-ratio:2),only screen and(-o-min-device-pixel-ratio:2/1){\n    .audioPlayIcon{\n        background-image:url(\"/public/icon-assets/editor-audio-control-fill@2x.png\");\n        background-size:128px 128px;\n    }\n}\n\n.playingIcon{\n    background-position:-40px 0;\n}\n.whitePlayer .audioPlayIcon{\n    background-position:0 -40px!important;\n}\n.whitePlayer .playingIcon{\n    background-position:-40px -40px!important;\n}\n\n.notecardAudioClass{\n    text-align:center;\n    position:relative;\n    background-color:#212121;\n    height:72px;\n    border-radius:8px;\n    -webkit-box-shadow:0 1px 2px 0 rgba(0,0,0,0.25);\n    box-shadow:0 1px 2px 0 rgba(0,0,0,0.25);\n    -moz-box-shadow:0 1px 2px 0 rgba(0,0,0,0.25);\n    margin: 16px 8px;\n}\n.whitePlayer{\n    background-color:#fff;\n}\n#text-editor wave{\n    border-right:none!important;\n    position:absolute!important;\n    width:100%;\n    top:0;\n}\n.waveformContainer{\n    position:absolute;\n    top:0;\n    bottom:0;\n    right:0;\n    left:0;\n}\n.durationDiv{\n    position:absolute;\n    bottom:0;\n    right:32px;\n    font-size:12px;\n}\n.progressTimeDiv{\n    position:absolute;\n    bottom:0;\n    left:32px;\n    font-size:12px;\n}\n\n#note-editor table:not(.zne-block table),\n#note-editor th:not(.zne-block th),\n#note-editor tr:not(.zne-block tr),\n#note-editor td:not(.zne-block td) {\n  border: 1px solid!important;\n  border-collapse: collapse;\n}\n\n.zn-quote {\n    font-family: Georgia, Baskerville, sans-serif;\n    font-style: italic;\n    margin: 16px 0px;\n    font-size: 1em;\n    border-left: 6px solid rgba(0,0,0,.4);\n    padding: 8px 16px;\n    background-color: rgba(0,0,0,0.1);\n    border-radius: 8px;\n}\n\n.white_tb .zn-quote {\n    border-left: 6px solid rgba(255,255,255,0.84);\n    background-color: rgba(255,255,255,0.1);\n}\n\n.zn-code {\n    background-color: rgba(0,0,0,0.1) !important;\n    overflow-x : auto;\n    display : block;\n    padding: 8px 16px;\n    white-space: pre-wrap;\n    border-radius: 8px;\n}\n\n.white_tb .zn-code {\n    background-color: rgba(255,255,255,0.1) !important;\n}\n\n\n\n\n/* table chnages */\n\n#text-editor table:not(.ze_tableView):not(.zne-block table) {\n    /* display: block; */\n    overflow-x: auto;\n    white-space: nowrap;\n    border-bottom: none!important;\n    border-top: none!important;\n    border-left: none!important;\n    border-right: none!important;\n}\n\n#text-editor td pre{\n    white-space: pre-wrap;\n}\n\n#text-editor table:not(.zne-block table) td:not(.zne-block td) {\n    width: 120px;\n    word-break: break-word;\n    vertical-align: top;\n}\n\n/* table chnages */\n\n.zne-block {\n    cursor: default;\n    border: 1px solid #e0e0e0;\n    position: relative;\n    border-radius: 4px;\n    padding: 8px;\n}\n</style>",_dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"text",position:[1,1,1,3,1]}],_observedAttributes:["wavesurfers","notecard","parsedHtml","showEditorOverlay","hasTitle","sanitizer"],data:function(){return{wavesurfers:Lyte.attr("array",{default:[]}),notecard:Lyte.attr("object",{default:{}}),parsedHtml:Lyte.attr("string",{default:""}),showEditorOverlay:Lyte.attr("boolean",{default:!1}),hasTitle:Lyte.attr("boolean",{default:!1}),sanitizer:Lyte.attr("object",{default:{attr:Lyte.Security.createSanitizer({ADD_URI_SAFE_ATTR:["style"],ALLOWED_STYLE:"ALL",STYLE_VALIDATION:!1})}})}},textColorObserver:function(){for(var t=this.getData("wavesurfers"),e=!this.getData("textColorBlack")?"#212121":"#ffffff",n=0;n<t.length;n++){var i=this.getData(t[n]);isValidObject(i)&&(i.params.progressColor=e)}}.observes("textColorBlack").on("init"),contentObserver:function(){this.setEditorContent()}.observes("notecard.contentXML"),didConnect:function(){this.setData("showEditorOverlay",!1),this.setEditorContent()},didDestroy:function(){this.deactivatePreviousWavesurfers()},titleObserver:function(){var t=this.getData("notecard");isValidObject(t)&&isValidString(t.name)&&"untitled"!==t.name.toLowerCase()&&this.setData("hasTitle",!0)}.observes("notecard.name").on("init"),setEditorContent:function(){var t=this.getData("notecard"),e=parseZnote(t.contentXML,t.notecard_id);this.setData("parsedHtml",e),this.initialiseAudioResources()},initialiseAudioResources:function(){this.deactivatePreviousWavesurfers();var t=this.getData("wavesurfers"),e=this.getData("notecard"),n=!this.getData("textColorBlack"),i=this.getData("parsedHtml"),a=document.createElement("div");a.innerHTML=i;for(var o=a.getElementsByClassName("notecardAudioClass"),r=(e.notebook_id,e.notecard_id),s=0;s<o.length;s++){var l=o[s].id,d=initialiseWaveSurferForEditor(l,getResourceDownloadUrl(r,l),n);this.setData("wavesurfer_"+l,d),t.push("wavesurfer_"+l)}},deactivatePreviousWavesurfers:function(){for(var t=this.getData("wavesurfers"),e=0;e<t.length;e++){var n=this.getData(t[e]);isValidObject(n)&&n.isPlaying()&&n.playPause(),this.setData(t[e],{})}}},{mixins:["card-util"]}),Lyte.Component.register("audio-note-view",{_template:'<template tag-name="audio-note-view" id="audio-note-editor"> <div class="audio-editor-wrap"> <div class="editor-space editor" id="audio-editor"> <div id="image-editor-div"> <div class="card-title"> <div> {{unescape(replacewithifempty(notecard.name,\'\',\'untitled\'))}} </div> </div> <div class="content {{if(hasTitle,\'\',\'zero-top\')}}"> <div class="waveform-table {{if(textColorBlack,\'\',\'white-audio-player\')}}"> <div class="waveform-cell"> <div id="waveform-container"></div> <div id="progress-time">{{progressTime}}</div> <div id="total-duration">{{totalDuration}}</div> </div> <div class="play-pause-icon hide-icon" onclick="{{action(\'playPauseAudio\')}}"></div> </div> </div> </div> </div> </div> </template>\n<style>.audio-note-editor {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\n#audio-note-editor {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\n#audio-note-editor .playerContainer {\n\tposition: absolute;\n    top: 50%;\n    left: 0;\n    right: 0;\n    bottom: 59px;\n    margin-top: -152px;\n    text-align: center;\n    overflow: auto;\n}\n\n.waveform-table {\n    display: table;\n    position: absolute;\n\n    top: 0;\n    height: 100%;\n    width: 100%;\n}\n\n.waveform-cell {\n    display: table-cell;\n    vertical-align: middle;\n}\n\n#waveform-container {\n    margin-left: auto;\n    margin-right: auto;\n    width: 100%;\n}\n\n#audio-note-editor .titleContainer .title {\n    color: inherit;\n}\n\n.play-pause-icon {\n    position: absolute;\n\n    bottom: 20%;\n    left: 50%;\n    margin-left: -32px;\n\n\tbackground:url("/public/icon-assets/sprite-audio.png") no-repeat scroll;\n\theight: 64px;\n\twidth: 64px;\n\tbackground-position: 0px 0px;\n\tdisplay: inline-block;\n\tcursor: pointer;\n}\n\n.audio-playing-icon {\n\tbackground-position: -64px 0px;\n}\n\n.white-audio-player .play-pause-icon {\n\tbackground-position: 0px -64px!important;\n}\n\n.white-audio-player .audio-playing-icon {\n\tbackground-position: -64px -64px!important;\n}\n\nwave {\n\tborder-right: none!important;\n\toverflow-x: hidden!important;\n}\n\n.whiteDots {\n\tbackground-color: white!important;\n}\n\n@media only screen and (-webkit-min-device-pixel-ratio: 2),\nonly screen and (min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1) {\n\t.play-pause-icon{\n\t\tbackground-image:url("/public/icon-assets/sprite-audio@2x.png");\n\t\tbackground-size: 128px 128px;\n\t}\n}\n\n#progress-time {\n\t/* display: inline-block; */\n    float: left;\n    margin-left: 32px;\n}\n\n#total-duration {\n\t/* display: inline-block; */\n    float: right;\n    margin-right: 32px;\n}\n</style>',_dynamicNodes:[{type:"text",position:[1,1,1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"attr",position:[1,1,1,3,1]},{type:"text",position:[1,1,1,3,1,1,3,0]},{type:"text",position:[1,1,1,3,1,1,5,0]},{type:"attr",position:[1,1,1,3,1,3]}],_observedAttributes:["wavesurfer","audioLink","allAudioResources","progressTime","totalDuration","notecard","hasTitle"],data:function(){return{wavesurfer:Lyte.attr("object",{default:null}),audioLink:Lyte.attr("string",{default:18}),allAudioResources:Lyte.attr("array",{default:[]}),progressTime:Lyte.attr("string",{default:""}),totalDuration:Lyte.attr("string",{default:""}),notecard:Lyte.attr("object",{default:{}}),hasTitle:Lyte.attr("boolean",{default:!1})}},textColorObserver:function(){var t=this.getData("wavesurfer"),e=!this.getData("notecard").textColorBlack?"#212121":"#ffffff";isValidObject(t)&&(t.params.progressColor=e)}.observes("textColorBlack").on("init"),titleObserver:function(){var t=this.getData("notecard");isValidObject(t)&&isValidString(t.name)&&"untitled"!==t.name.toLowerCase()&&this.setData("hasTitle",!0)}.observes("notecard.name").on("init"),wavesurferObserver:function(){var t=this.getData("wavesurfer"),e=this;t.on("ready",function(){e.setData("totalDuration",convertSecondsTohhmmss(t.getDuration()))}),t.on("audioprocess",function(){e.setData("progressTime",convertSecondsTohhmmss(t.getCurrentTime()))})}.observes("wavesurfer"),contentObserver:function(){this.getData("notecard");var t=!this.get("textColorBlack")?"#ffffff":"#212121";this.deactivatePreviousWavesurfer(),$("#waveform-container").empty();var e=initialiseWaveSurfer(t);this.setData("wavesurfer",e),this.setEditorContent()}.observes("notecard.contentXML"),didConnect:function(){this.setData("showEditorOverlay",!1);this.getData("notecard");var t=!this.get("textColorBlack")?"#ffffff":"#212121";this.deactivatePreviousWavesurfer(),$("#waveform-container").empty();var e=initialiseWaveSurfer(t);this.setData("wavesurfer",e),this.setEditorContent()},didDestroy:function(){this.deactivatePreviousWavesurfer(),$("#waveform-container").empty()},actions:{playPauseAudio:function(){var t=this.get("wavesurfer");isValidObject(t)&&($(".play-pause-icon").toggleClass("audio-playing-icon"),t.playPause())}},setEditorContent:function(){var t=this.getData("notecard");this.parseZNMLForAudio(t.contentXML)},parseZNMLForAudio:function(t){var e=this.get("notecard"),n=getAllZAudio(t,e.notecard_id);if(this.setData("allAudioResources",n),n.length>0){var i=n[0].source;this.setData("audioLink",i),this.getData("wavesurfer").load(this.getData("audioLink"))}},deactivatePreviousWavesurfer:function(){var t=this.getData("wavesurfer");isValidObject(t)&&t.isPlaying()&&t.playPause(),this.setData("wavesurfer",null)}}),Lyte.Component.register("checklist-note-view",{_template:'<template tag-name="checklist-note-view"> <div class="checklist-editor-wrap"> <div class="editor-space editor" id="checklist-editor"> <div id="checklist-editor-div"> <div class="card-title"> <div> {{unescape(replacewithifempty(notecard.name,\'\',\'untitled\'))}} </div> </div> <div class="content {{if(hasTitle,\'\',\'zero-top\')}}"> <ul id="unChecked-checkbox-array"> <template is="for" items="{{unCheckedCheckboxArray}}" item="item" index="index"> <li> <div class="checkbox-item {{if(item.checked,\'checked-item\')}} {{if(textColorBlack,\'\',\'white-item\')}}"> <div class="checkBox {{if(textColorBlack,\'\',\'white-checkbox\')}} {{if(item.checked,\'checked\')}}"></div> <div class="checkboxContent version-checklist-item">{{unescape(item.content)}}</div> </div> </li> </template> </ul> <template is="if" value="{{showCompleted}}"><template case="true"> <div id="completed-label-div"> Completed </div> </template></template> <ul id="checked-checkbox-array"> <template is="for" items="{{checkedCheckboxArray}}" item="item" index="index"> <li> <div class="checkbox-item {{if(item.checked,\'checked-item\')}} {{if(textColorBlack,\'\',\'white-item\')}}"> <div class="checkBox {{if(textColorBlack,\'\',\'white-checkbox\')}} {{if(item.checked,\'checked\')}}"></div> <div class="checkboxContent version-checklist-item">{{unescape(item.content)}}</div> </div> </li> </template> </ul> </div> </div> </div> </div> </template>\n<style>#editorWrapDiv {\n    position: absolute;\n    top: 50px;\n    bottom: 0;\n    width: inherit;\n}\n\n.checkbox-item {\n\tborder-bottom: 1px solid rgba(0, 0, 0, 0.1);\n    /*height: 24px;*/\n    padding: 12px;\n    /*font-family: Charter;*/\n\t/* margin: 0 5%; */\n}\n\n.checkbox-item * {\n\tdisplay: inline-block;\n\toutline: 0;\n\tborder: 0;\n\tvertical-align: top;\n\tline-height: 1.75em;\n}\n\n#checklist-editor-div ul {\n    list-style-type: none;\n    padding: 0;\n    position: relative;\n}\n\n#checklist-editor {\n    margin-left: 64px;\n    margin-right: 64px;\n}\n\n/* .checkbox-item:hover .checklist-icon {\n\t-moz-transform: scale(1);\n\t-ms-transform: scale(1);\n\t-webkit-transform: scale(1);\n\ttransform: scale(1);\n\topacity: 1;\n\tfilter: alpha(opacity=1);\n} */\n\n.checkboxContent, autogrowing-div {\n\twidth: calc(100% - 50px);\n\t-webkit-appearance: none;\n\tappearance: none;\n\t-moz-appearance: none;\n    background: transparent;\n    height: inherit;\n    font-size: inherit;\n    /*font-family: Charter;*/\n\tcolor: inherit;\n}\n\n#checklist-editor-div .checkBox {\n\tmargin: 0.6em 8px 0 0!important;\n}\n\n::-webkit-input-placeholder { /* WebKit, Blink, Edge */\n\tcolor: inherit;\n\topacity: 0.25;\n}\n:-moz-placeholder { /* Mozilla Firefox 4 to 18 */\n\tcolor: inherit;\n   \topacity: 0.25;\n}\n::-moz-placeholder { /* Mozilla Firefox 19+ */\n\tcolor: inherit;\n   \topacity: 0.25;\n}\n:-ms-input-placeholder { /* Internet Explorer 10-11 */\n\tcolor: inherit;\n   \topacity: 0.25;\n}\n\n#checklist-editor-div {\n\tcolor: inherit;\n    overflow: auto;\n    position: absolute;\n    width: 100%;\n    top: 0;\n    bottom: 0;\n    -ms-overflow-style: none;  /* IE 10+*/\n    /* overflow: -moz-scrollbars-none;   */\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-overflow-scrolling: touch;\n}\n\n.checked-item {\n\topacity: 0.6;\n}\n\n.checklist-icon {\n\tbackground-image: url("/public/icon-assets/sprite-checklist.png");\n\t-webkit-transition: transform 0.3s linear;\n\t-moz-transition: transform 0.3s linear;\n\t-ms-transition: transform 0.3s linear;\n\t-o-transition: transform 0.3s linear;\n\ttransition: transform 0.3s linear;\n\topacity: 0;\n\tfilter: alpha(opacity=0);\n\t-moz-transform: scale(0);\n\t-ms-transform: scale(0);\n\t-webkit-transform: scale(0);\n\ttransform: scale(0);\n\tcursor: pointer;\n\theight: 24px;\n    width: 24px;\n}\n\n.sortable-item:hover .checklist-icon {\n\t-moz-transform: scale(1);\n\t-ms-transform: scale(1);\n\t-webkit-transform: scale(1);\n\ttransform: scale(1);\n\topacity: 1;\n\tfilter: alpha(opacity=1);\n}\n\n.checklist-editor {\n    position: absolute;\n    top: 50px;\n    left: 10px;\n    right: 10px;\n    bottom: 10px;\n}\n\n.version-checklist-item {\n\twidth: 90%;\n\twidth: calc(100% - 50px);\n}\n\n#reorder-item-icon {\n    position: absolute;\n    left: 6%;\n    top: 14px;\n\tleft: calc(5% - 30px);\n}\n\n#delete-item-icon {\n    position: absolute;\n    left: 92%;\n\tleft: calc(95% + 12px);\n    top: 14px;\n\tmargin: 0;\n\tbackground-position: -24px 0;\n}\n\n#delete-item-icon.white-checklist-icon {\n\tbackground-position: -24px -24px!important;\n}\n\n#completed-label-div {\n\tmargin: 0 5%;\n\tmargin-top: 32px;\n\tpadding-left: 12px;\n}\n\n\n.white-checklist-icon {\n\tbackground-position-y: -24px!important;\n}\n\n\n.white-item {\n\tborder-bottom: 1px solid rgba(255,255,255,0.2)!important;\n}\n\n@media only screen and (-webkit-min-device-pixel-ratio: 2),\nonly screen and (min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1) {\n\t.checklist-icon {\n\t\tbackground-image: url("/public/icon-assets/sprite-checklist@2x.png");\n\t\tbackground-size: 48px 48px;\n\t}\n\n}\n\n#checklist-editor-div::-webkit-scrollbar {\n    display: none;  // Safari and Chrome\n}\n\n.checkboxContent .editableDiv, autogrowing-div .editableDiv {\n\twidth: inherit;\n}\n\n[placeholder]:empty:before {\n    content: \'New Item\';\n    color: inherit;\n\topacity: 0.25;\n}\n\n[placeholder]:empty:focus:before {\n    content: "";\n}\n</style>',_dynamicNodes:[{type:"text",position:[1,1,1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"attr",position:[1,1,1,3,1,1]},{type:"for",position:[1,1,1,3,1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,3,0]}]},{type:"attr",position:[1,1,1,3,3]},{type:"if",position:[1,1,1,3,3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,1,1,3,5,1]},{type:"for",position:[1,1,1,3,5,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,3,0]}]}],_observedAttributes:["contentChanged","checkedCheckboxArray","unCheckedCheckboxArray","checkBoxArray","showCompleted","hasTitle"],data:function(){return{contentChanged:Lyte.attr("boolean",{default:!1}),checkedCheckboxArray:Lyte.attr("array",{default:[]}),unCheckedCheckboxArray:Lyte.attr("array",{default:[]}),checkBoxArray:Lyte.attr("array",{default:[]}),showCompleted:Lyte.attr("boolean",{default:!1}),hasTitle:Lyte.attr("boolean",{default:!1})}},contentObserver:function(){this.setEditorContent()}.observes("notecard.contentXML"),titleObserver:function(){var t=this.getData("notecard");isValidObject(t)&&isValidString(t.name)&&"untitled"!==t.name.toLowerCase()&&this.setData("hasTitle",!0)}.observes("notecard.name").on("init"),didConnect:function(){this.setData("showEditorOverlay",!1),this.setEditorContent()},setEditorContent:function(){var t=this.getData("notecard"),e=parseChecklistNote(t.contentXML),n=[],i=[];sanitizeCheckListNoteContent(e);if(e.length>0){var a=e.filter(function(t){return!1===t.checked});a.length>0&&Lyte.arrayUtils(n,"push",a)}if(this.setData("unCheckedCheckboxArray",n),e.length>0){var o=e.filter(function(t){return!0===t.checked});o.length>0&&(Lyte.arrayUtils(i,"push",o),this.setData("showCompleted",!0))}this.setData("checkedCheckboxArray",i)}},{mixins:["card-util"]}),Lyte.Component.register("image-note-view",{_template:'<template tag-name="image-note-view"> <div class="image-editor-wrap"> <div class="editor-space editor" id="image-editor"> <div id="image-editor-div"> <div class="card-title"> <div> {{unescape(replacewithifempty(notecard.name,\'\',\'untitled\'))}} </div> </div> <div class="content {{if(hasTitle,\'\',\'zero-top\')}}" id="image-content"> <image-editor-preview main-image="{{lbind(mainImage)}}" wrapper-class-name="photo-editor" all-images="{{allImages}}" change-image-to="{{changeImageTo}}"> </image-editor-preview> </div> </div> </div> </div> </template>\n<style>.add-image-text .main-text {\n    text-align: center;\n    color: #CCC;\n}\n\n.add-image-text .sub-text {\n\tcolor: #808080;\n}\n</style>',_dynamicNodes:[{type:"text",position:[1,1,1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"attr",position:[1,1,1,3,1]},{type:"componentDynamic",position:[1,1,1,3,1]}],_observedAttributes:["allImages","mainImage","rightImage","leftImage","hasTitle"],data:function(){return{allImages:Lyte.attr("array",{default:[]}),mainImage:Lyte.attr("string",{default:""}),rightImage:Lyte.attr("object",{default:""}),leftImage:Lyte.attr("object",{default:""}),hasTitle:Lyte.attr("boolean",{default:!1})}},contentObserver:function(){this.downloadXMLContent()}.observes("notecard.contentXML"),didConnect:function(){this.downloadXMLContent()},titleObserver:function(){var t=this.getData("notecard");isValidObject(t)&&isValidString(t.name)&&"untitled"!==t.name.toLowerCase()&&this.setData("hasTitle",!0)}.observes("notecard.name").on("init"),downloadXMLContent:function(){var t=this.getData("notecard");this.parseZNMLForImages(t.contentXML)},parseZNMLForImages:function(t){var e=this.getData("notecard");if(e){var n=getAllZimages(t,e.notecard_id);this.setData("allImages",n),n.length>0&&this.setData("mainImage",n[0])}}},{mixins:["card-util"]}),Lyte.Component.register("sketch-note-view",{_template:'<template tag-name="sketch-note-view"> <div class="sketch-editor-wrap"> <div class="editor-space editor" id="sketch-editor"> <div id="sketch-editor-div"> <div class="card-title"> <div> {{unescape(replacewithifempty(notecard.name,\'\',\'untitled\'))}} </div> </div> <div class="content {{if(hasTitle,\'\',\'zero-top\')}}"> <div class="main-image-preview image-preview"> <span class="helper"></span> <img id="sketch-image" src="{{mainImage}}"> </div> </div> </div> </div> </div> </template>\n<style>.image-preview img {\n    max-width: 98%;\n    max-height: 99%;\n    vertical-align: middle;\n}\n\n.image-preview .helper {\n    height: 100%;\n    vertical-align: middle;\n    display: inline-block;\n}\n</style>',_dynamicNodes:[{type:"text",position:[1,1,1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"attr",position:[1,1,1,3,1,3]}],_observedAttributes:["showDotsLoading","isWhiteDots","mainImage","hasTitle"],data:function(){return{showDotsLoading:Lyte.attr("boolean",{default:!1}),isWhiteDots:Lyte.attr("boolean",{default:!1}),mainImage:Lyte.attr("string",{default:""}),hasTitle:Lyte.attr("boolean",{default:!1})}},contentObserver:function(){this.initializeEditorF()}.observes("notecard.contentXML"),didConnect:function(){this.initializeEditorF()},titleObserver:function(){var t=this.getData("notecard");isValidObject(t)&&isValidString(t.name)&&"untitled"!==t.name.toLowerCase()&&this.setData("hasTitle",!0)}.observes("notecard.name").on("init"),initializeEditorF:function(){var t=this.getData("notecard"),e=getAllZimages(t.contentXML,t.notecard_id);e.length>0&&this.setData("mainImage",e[0])}}),Lyte.Component.register("bookmark-note-view",{_template:'<template tag-name="bookmark-note-view"> <div class="bookmark-editor-wrap"> <div class="editor-space editor" id="bookmark-editor"> <template is="if" value="{{isRecipeCard}}"><template case="true"> <smart-content-recipe notecard="{{lbind(notecard)}}"> </smart-content-recipe> </template><template case="false"><template is="if" value="{{isReaderContent}}"><template case="true"> <div class="card-title"> <div> {{unescape(replacewithifempty(notecard.name,\'\',\'untitled\'))}} </div> </div> <div class="content {{if(hasTitle,\'\',\'zero-top\')}}" id="nbreader-content"></div> </template><template case="false"> <div id="showNoContent"> <p>{{translate(\'publicShare.noReaderContentFirstSen\')}}</p> <p>{{translate(\'publicShare.noReaderContentSecondSen\')}}</p> <p id="openlink-button" onclick="{{action(\'openLinkInNewTab\')}}"> {{translate(\'publicShare.openLinkInNewTab\')}} </p> </div> </template></template></template></template> </div> </div> </template>\n<style>#bookmark-editor {\n\tcolor: inherit;\n    overflow: auto;\n    position: absolute;\n    width: 100%;\n    -ms-overflow-style: none;  /* IE 10+ */\n    /* overflow: -moz-scrollbars-none;  /* Firefox */\n\tmargin-left: 0;\n\tmargin-right: 0;\n\t-webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-overflow-scrolling: touch;\n}\n\n#bookmark-editor::-webkit-scrollbar {\n    display: none;  /* Safari and Chrome */\n}\n\n#bookmark-editor .close {\n\tposition: absolute;\n    top: 0;\n    right: 8px;\n    z-index: 12;\n\n    width: 24px;\n    height: 24px;\n    margin: 16px;\n}\n\n#showNoContent{\n\tposition: absolute;\n    top: 45%;\n    right: 0;\n    left: 0;\n    text-align: center;\n}\n\n#nbreader-content{\n\tpadding: 0px 40px;\n}\n\n#nbreader-content content{\n\twidth: 100%;\n    white-space: normal;\n\tpadding: 10px 20px;\n}\n\n#openlink-button {\n\tpadding: 10px 20px;\n    background: #eee;\n    color: #000;\n    cursor: pointer;\n    width: 150px;\n    border-radius: 5px;\n    margin: 0 auto;\n    margin: 14px auto;\n}\n</style>',_dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1]},{type:"attr",position:[3]}]},false:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]},{type:"attr",position:[1,5]},{type:"text",position:[1,5,1]}]}},default:{}}]}},default:{}}],_observedAttributes:["isRecipeCard","dotColorClass","isReaderContent","hasTitle","notecard"],data:function(){return{isRecipeCard:Lyte.attr("boolean",{default:!1}),dotColorClass:Lyte.attr("string",{default:""}),isReaderContent:Lyte.attr("boolean",{default:!1}),hasTitle:Lyte.attr("boolean",{default:!1}),notecard:Lyte.attr("object",{default:{}})}},textColorObserver:function(){var t=!this.getData("notecard").textColorBlack;this.setData("dotColorClass",t?"white-dots":"")}.observes("textColorBlack").on("init"),titleObserver:function(){var t=this.getData("notecard");isValidObject(t)&&isValidString(t.name)&&"untitled"!==t.name.toLowerCase()&&this.setData("hasTitle",!0)}.observes("notecard.name").on("init"),smartContentObserver:function(){switch(this.get("notecard").smart_type){case"Recipe":this.setData("isRecipeCard",!0)}}.observes("notecard.smartContent"),didConnect:function(){this.setData("showEditorOverlay",!1);var t=this.getData("notecard");t.is_smartcontent_available&&"bookmark"!==t.smart_type.toLowerCase()?downloadNoteSmartContentNR(t.notecard_id).then(function(e){"object"==typeof(e=JSON.parse(e))&&LyteComponent.set(t,"smartContent",e.smart_contents[0].smart_content)}).catch(function(t){}):this.setEditorContent()},actions:{openLinkInNewTab:function(){var t=this.getData("notecard");openLinkInNewTab(getBookmarkDescMixin(t))}},setEditorContent:function(){var t=this.getData("notecard"),e=getReaderViewContent(t.contentXML);isValidString(e)?(this.setData("isReaderContent",!0),e=e.replace(/(?:\r\n|\r|\n)/g,""),document.getElementById("nbreader-content").innerHTML=e):this.setData("isReaderContent",!1)}}),Lyte.Component.register("file-note-view",{_template:'<template tag-name="file-note-view"> <div class="file-editor-wrap"> <div class="editor-space editor" id="file-editor"> <div id="file-editor-div"> <div class="card-title"> <div> {{unescape(replacewithifempty(notecard.name,\'\',\'untitled\'))}} </div> </div> <div class="content {{if(hasTitle,\'\',\'zero-top\')}}"> <template is="if" value="{{hasPreview}}"><template case="true"> <template is="if" value="{{isIframeLoad}}"><template case="true"> <iframe src="{{allFiles[0].docs_preview_url}}" id="preview-iframe" class="file-preview {{if(expHandlers(showChapters,\'||\',showTranscript),\'video-minimize-chapter\',\'\')}}"> </iframe> <div class="position-absolute w-100 col-12 p-0 transition-all-200-linear bg-1c1c no-scroll {{if(expHandlers(showChapters,\'||\',showTranscript),\'chapters-height\',\'h-0\')}}" style="line-height:1.3em!important;"> <template is="if" value="{{showChapters}}"><template case="true"> <chapters-view chapters="{{chapters}}" sprite-thumbnails="{{spriteThumbnails}}" display-video-chapters="{{lbind(displayVideoChapters)}}" notecard="{{notecard}}" create-origin-element="{{createOriginElement}}"></chapters-view> </template></template> </div> </template><template case="false"> <div class="helper"></div> <img src="{{allFiles[0].docs_preview_url}}" class="image-content-preview"> </template></template> </template><template case="false"><template is="if" value="{{contentDownloading}}"><template case="true"> <dots-loading> </dots-loading> </template><template case="false"> <div class="no-preview-wrap" title="{{notecard.name}}"> <div class="no-file-preview"> <file-grid-preview card="{{notecard}}" no-name="{{noName}}" size-level="{{sizeLevel}}"> </file-grid-preview> </div> <div class="file-name"> {{notecard.name}} </div> <div class="no-preview-text"> No preview available </div> </div> </template></template></template></template> </div> </div> </div> <template is="if" value="{{download_url}}"><template case="true"> <div id="note-options-container" class="editor-footer file-editor-footer"> <a href="{{download_url}}" target="_blank" class="note-options inote-option inote-option-black idownload-dim" title="Download"> </a> </div> </template></template> </div> </template>\n<style>\n.block {\n\tposition: relative;\n\tdisplay: inline-block;\n\twidth: 24px;\n\theight: 24px;\n\tbackground-color: black;\n}\n\n.no-preview-wrap {\n\tposition: absolute;\n    top: 50%;\n    left: 0;\n    right: 0;\n\n    -webkit-transform: translateY(-50%);\n    -moz-transform: translateY(-50%);\n   \t-ms-transform: translateY(-50%);\n   \t-o-transform: translateY(-50%);\n    transform: translateY(-50%);\n}\n\n.file-name {\n\tfont-size: 16px;\n    width: 75%;\n    margin: auto;\n    padding-top: 10px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    text-align: center;\n}\n\n.no-preview-text {\n\tcolor: grey;\n    font-size: 14px;\n    text-align: center;\n    padding-top: 8px;\n}\n\n.no-file-preview {\n    position: relative;\n    width: 134px;\n    height: 134px;\n    left: 50%;\n    margin: 0 0 0 -67px;\n}\n\n.file-preview {\n    position: relative;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto;\n    width : 100%;\n    height: 100%;\n    border : none;\n}\n\n.image-content-preview {\n    max-width: 98%;\n    max-height: 98%;\n    text-align: center;\n    vertical-align: middle;\n}\n\n#file-editor-div .content {\n\tbottom: 0px;\n}\n\n#note-options-container {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    text-align: center;\n}\n\n#note-options-container .note-options {\n    margin: 8px 16px;\n\tdisplay: inline-block;\n}\n\n.editor-footer {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    min-height: 40px;\n    text-align: center;\n\tborder-top: solid 1px rgba(0, 0, 0, 0.1) !important;\n}\n\n.video-title {\n    color: #ffffff;\n}\n\n.video-wrap {\n    background-color: #333333 !important;\n    top: 30px !important;\n    left: 0px !important;\n    right: 0px !important;\n}\n\n#file-video-player {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    width: 100%;\n    height: 60%;\n    margin: auto;\n}\n\n#file-audio-player {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    width: 80%;\n    margin: auto;\n}\n\n/*endRemoveIf(!windows)*/\n.video-space {\n    margin-left: 0px !important;\n    margin-right: 0px !important;\n    background-color: #000000;\n}\n\n.video-minimize-chapter{\n    max-height: 60%!important;\n    height: 60%!important;\n    bottom: auto;\n}\n\n.chapters-height{\n    height: 40%!important;\n}\n\n.close-icon {\n    background-image: url("/public/icon-assets/arrow-img-next-prev.png");\n    height: 64px;\n    width: 64px;\n    position: absolute;\n    top: 50%;\n    margin-top: -32px;\n    cursor: pointer;\n    display: none;\n}</style>',_dynamicNodes:[{type:"text",position:[1,1,1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"attr",position:[1,1,1,3,1]},{type:"if",position:[1,1,1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[3]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"text",position:[1,3,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}}],_observedAttributes:["allFiles","hasPreview","isIframeLoad","showTick","chapters","spriteThumbnails","noName","sizeLevel","noShowTime","hasTitle","contentDownloading","download_url","showChapters","showTranscript","globalEventListeners","isEmbedView"],data:function(){return{allFiles:Lyte.attr("array",{default:[]}),hasPreview:Lyte.attr("boolean",{default:!1}),isIframeLoad:Lyte.attr("boolean",{default:!0}),showTick:Lyte.attr("boolean",{default:!1}),chapters:Lyte.attr("array",{default:[]}),spriteThumbnails:Lyte.attr("string",{default:""}),noName:Lyte.attr("boolean",{default:!0}),sizeLevel:Lyte.attr("number",{default:1}),noShowTime:Lyte.attr("boolean",{default:!0}),hasTitle:Lyte.attr("boolean",{default:!1}),contentDownloading:Lyte.attr("boolean",{default:!1}),download_url:Lyte.attr("string",{default:""}),showChapters:Lyte.attr("boolean",{default:!1}),showTranscript:Lyte.attr("boolean",{default:!1}),globalEventListeners:Lyte.attr("array",{default:[]}),isEmbedView:Lyte.attr("boolean",{default:!1})}},init:function(){this.getData("notecard");this.generatePreview(3e3,0)},didConnect:function(){addEventListenerTo(this.getData("globalEventListeners"),Lyte.addEventListener("showTranscriptFromPlayer",function(){this.getData("showChapters")&&this.setData("showChapters",!1),this.showTranscriptVideo()}.bind(this))),addEventListenerTo(this.getData("globalEventListeners"),Lyte.addEventListener("showChaptersFromPlayer",function(){this.getData("showTranscript")&&this.setData("showTranscript",!1),this.setData("showChapters",!this.getData("showChapters"))}.bind(this)))},didDestroy:function(){removeGlobalEventListners(this.getData("globalEventListeners"))},titleObserver:function(){var t=this.getData("notecard");isValidObject(t)&&isValidString(t.name)&&"untitled"!==t.name.toLowerCase()&&this.setData("hasTitle",!0)}.observes("notecard.name").on("init"),getVideoChapters:function(){var t=this.getData("notecard"),e=t.embed_resources[0].resource_id;getVideoChapters(t.notecard_id,e,t.is_shared_note).then(function(t){(t=JSON.parse(t))&&isValidCode(t.code)&&t.chapters&&(this.setData("chapters",t.chapters),t.chapters&&t.chapters.length&&this.getChaptersSprite(this.getData("notecard")))}.bind(this)).catch(function(t){errorLog(t,"getVideoChapters.video-note-editor")}.bind(this))},getChaptersSprite:function(t){getChaptersSprite(t.notecard_id,t.embed_resources[0].resource_id,t.is_shared_note).then(t=>{var e=new FileReader;e.onload=function(t){const e=t.target.result;this.setData("spriteThumbnails",e)}.bind(this),e.readAsDataURL(t)}).catch(t=>{})},showTranscriptVideo:function(t){this.setData("tryNow",t),this.getData("showTranscript")?this.setData("showTranscript",!1):this.setData("showTranscript",!0)},generatePreview:function(t,e){if(!(e>10)){var n=this.getData("notecard"),i=getAllZFiles(n);this.setData("allFiles",i);var a=i[0];a.notecard_id=n.notecard_id;var o=a.name;isValidString(o)||(o=n.name);var r,s=getFileDetails(o.toLowerCase(),a.type);a.file_type=s.type,a.extension=s.extension,LyteComponent.set(n,"preview_class",s.previewClass),LyteComponent.set(n,"preview_bgcolor",s.bgcolor);var l=!1;isValidObject(n)&&isValidObject(n.embed_resources[0])&&1===n.embed_resources[0].docs_domain&&(l=!0);var d=this;if(this.setData("contentDownloading",!0),"PDF"===s.type&&l)r=getDocsDomain(n)+"/file/"+a.docs_resource_id+"?toolbar=false",this.setPreviewData(r,!0,!0,!1);else"IMAGE"===s.type?this.setPreviewData(a.source,!1,!0,!1):"VIDEO"===a.file_type?getHlsStatusNR(n.notecard_id,a.resource_id).then(function(i){if(i){var o=JSON.parse(i);if(isValidStatus(o.status)){d.getVideoChapters();var r=n.name;isValidString(r)||(r="Untitled"),this.setPreviewData("https://"+document.domain+"/videoPublic.do?resource_id="+encodeURIComponent(a.docs_resource_id)+"&nb_resource_id="+encodeURIComponent(a.notecard_id)+"&title="+encodeURIComponent(r),!0,!0,!1),document.querySelector(".spread-parent").classList.add("video-wrap"),document.querySelector(".card-title").classList.add("video-title"),document.querySelector(".editor-space").classList.add("video-space"),document.querySelector("#preview-iframe").scrolling="no"}else this.getFilePreviewInfo(n,l,a,t,e)}else this.getFilePreviewInfo(n,l,a,t,e)}.bind(this)).catch(function(i){this.getFilePreviewInfo(n,l,a,t,e)}.bind(this)):this.getFilePreviewInfo(n,l,a,t,e)}},getFilePreviewInfo:function(t,e,n,i,a){var o=this;if(e)filePreview("GET",getDocsDomain(t)+"/prvsvl/"+n.docs_resource_id+"?extn="+n.extension).then(function(t){if(t&&(t=JSON.parse(t))&&-1!==t.previewStatus)if(t.previewUrl&&"VIDEO"!==n.file_type&&"ZIP"!==n.file_type){previewUrl=t.previewUrl;var e=t.permalink;o.setData("download_url",e),o.setPreviewData(previewUrl,!0,!0,!1)}else t.pubSubConfig?(i>1e4&&(i=1e4),setTimeout(function(){o.generatePreview(i+3e3,++a)},i)):(o.setData("download_url",""),o.setData("contentDownloading",!1));else o.setData("download_url",""),o.setData("contentDownloading",!1)}).catch(function(t){o.setData("download_url",""),o.setData("contentDownloading",!1)});else{var r=getExternalFileUrlForWD()+"/file/"+n.docs_resource_id;this.setPreviewData(r,!0,!0,!1),filePreview("GET",getExternalFileUrlForWD()+"/api/v1/downloadauth/"+n.docs_resource_id).then(function(t){t&&t.DOWNLOAD_LINK?(o.setData("download_url",t.DOWNLOAD_LINK),o.setData("contentDownloading",!1)):(o.setData("download_url",""),o.setData("contentDownloading",!1))}).catch(function(t){o.setData("download_url",""),o.setData("contentDownloading",!1)})}},setPreviewData:function(t,e,n,i){var a=this.getData("allFiles");if(a.length>0){var o=a[0];LyteComponent.set(o,"docs_preview_url",t)}this.setData("isIframeLoad",e),this.setData("hasPreview",n),this.setData("contentDownloading",i)}}),Lyte.Component.register("video-note-view",{_template:'<template tag-name="video-note-view"> <div class="file-editor-wrap"> <div class="editor-space editor bg-1c1c" id="file-editor"> <div id="file-editor-div"> <div class="card-title"> <div> {{unescape(replacewithifempty(notecard.name,\'\',\'untitled\'))}} </div> </div> <div class="content {{if(hasTitle,\'\',\'zero-top\')}}"> <template is="if" value="{{hasPreview}}"><template case="true"> <template is="if" value="{{isIframeLoad}}"><template case="true"> <iframe src="{{allFiles[0].docs_preview_url}}" id="preview-iframe" class="file-preview {{if(expHandlers(showChapters,\'||\',showTranscript),\'video-minimize-chapter\',\'\')}}"> </iframe> <div class="position-absolute w-100 col-12 p-0 transition-all-200-linear bg-1c1c no-scroll {{if(expHandlers(showChapters,\'||\',showTranscript),\'chapters-height\',\'h-0\')}}" style="line-height:1.3em!important;"> <template is="if" value="{{showChapters}}"><template case="true"> <chapters-view chapters="{{chapters}}" sprite-thumbnails="{{spriteThumbnails}}" display-video-chapters="{{lbind(displayVideoChapters)}}" notecard="{{notecard}}" create-origin-element="{{createOriginElement}}"></chapters-view> </template></template> </div> </template><template case="false"> <div class="helper"></div> <img src="{{allFiles[0].docs_preview_url}}" class="image-content-preview"> </template></template> </template><template case="false"><template is="if" value="{{contentDownloading}}"><template case="true"> <dots-loading> </dots-loading> </template><template case="false"> <div class="no-preview-wrap" title="{{notecard.name}}"> <div class="no-file-preview"> <file-grid-preview card="{{notecard}}" no-name="{{noName}}" size-level="{{sizeLevel}}"> </file-grid-preview> </div> <div class="file-name"> {{notecard.name}} </div> <div class="no-preview-text"> No preview available </div> </div> </template></template></template></template> </div> </div> </div> <template is="if" value="{{download_url}}"><template case="true"> <div id="note-options-container" class="editor-footer file-editor-footer"> <a href="{{download_url}}" target="_blank" class="note-options inote-option inote-option-black idownload-dim" title="Download"> </a> </div> </template></template> </div> </template>\n<style>\n.block {\n\tposition: relative;\n\tdisplay: inline-block;\n\twidth: 24px;\n\theight: 24px;\n\tbackground-color: black;\n}\n\n.no-preview-wrap {\n\tposition: absolute;\n    top: 50%;\n    left: 0;\n    right: 0;\n\n    -webkit-transform: translateY(-50%);\n    -moz-transform: translateY(-50%);\n   \t-ms-transform: translateY(-50%);\n   \t-o-transform: translateY(-50%);\n    transform: translateY(-50%);\n}\n\n.file-name {\n\tfont-size: 16px;\n    width: 75%;\n    margin: auto;\n    padding-top: 10px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    text-align: center;\n}\n\n.no-preview-text {\n\tcolor: grey;\n    font-size: 14px;\n    text-align: center;\n    padding-top: 8px;\n}\n\n.no-file-preview {\n    position: relative;\n    width: 134px;\n    height: 134px;\n    left: 50%;\n    margin: 0 0 0 -67px;\n}\n\n.file-preview {\n    position: relative;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto;\n    width : 100%;\n    height: 100%;\n    border : none;\n}\n\n.image-content-preview {\n    max-width: 98%;\n    max-height: 98%;\n    text-align: center;\n    vertical-align: middle;\n}\n\n#file-editor-div .content {\n\tbottom: 0px;\n}\n\n#note-options-container {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    text-align: center;\n}\n\n#note-options-container .note-options {\n    margin: 8px 16px;\n\tdisplay: inline-block;\n}\n\n.editor-footer {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    min-height: 40px;\n    text-align: center;\n\tborder-top: solid 1px rgba(0, 0, 0, 0.1) !important;\n}\n\n.video-title {\n    color: #ffffff;\n}\n\n.video-wrap {\n    background-color: #333333 !important;\n    top: 30px !important;\n    left: 0px !important;\n    right: 0px !important;\n}\n\n#file-video-player {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    width: 100%;\n    height: 60%;\n    margin: auto;\n}\n\n#file-audio-player {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    width: 80%;\n    margin: auto;\n}\n\n/*endRemoveIf(!windows)*/\n.video-space {\n    margin-left: 0px !important;\n    margin-right: 0px !important;\n    background-color: #000000;\n}\n\n.video-minimize-chapter{\n    max-height: 60%;\n    height: 60%;\n    bottom: auto;\n}\n\n.chapters-height{\n    height: 40%;\n}\n\n.close-icon {\n    background-image: url("/public/icon-assets/arrow-img-next-prev.png");\n    height: 64px;\n    width: 64px;\n    position: absolute;\n    top: 50%;\n    margin-top: -32px;\n    cursor: pointer;\n    display: none;\n}\n\n\n.content iframe {\n    transition: .4s linear;\n    -webkit-transition: .4s linear;\n}</style>',_dynamicNodes:[{type:"text",position:[1,1,1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"attr",position:[1,1,1,3,1]},{type:"if",position:[1,1,1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[3]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"text",position:[1,3,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}}],_observedAttributes:["allFiles","hasPreview","isIframeLoad","showTick","chapters","spriteThumbnails","noName","sizeLevel","noShowTime","hasTitle","contentDownloading","download_url","showChapters","showTranscript","globalEventListeners","isEmbedView"],data:function(){return{allFiles:Lyte.attr("array",{default:[]}),hasPreview:Lyte.attr("boolean",{default:!1}),isIframeLoad:Lyte.attr("boolean",{default:!0}),showTick:Lyte.attr("boolean",{default:!1}),chapters:Lyte.attr("array",{default:[]}),spriteThumbnails:Lyte.attr("string",{default:""}),noName:Lyte.attr("boolean",{default:!0}),sizeLevel:Lyte.attr("number",{default:1}),noShowTime:Lyte.attr("boolean",{default:!0}),hasTitle:Lyte.attr("boolean",{default:!1}),contentDownloading:Lyte.attr("boolean",{default:!1}),download_url:Lyte.attr("string",{default:""}),showChapters:Lyte.attr("boolean",{default:!1}),showTranscript:Lyte.attr("boolean",{default:!1}),globalEventListeners:Lyte.attr("array",{default:[]}),isEmbedView:Lyte.attr("boolean",{default:!1})}},init:function(){this.generatePreview(3e3,0)},didConnect:function(){addEventListenerTo(this.getData("globalEventListeners"),Lyte.addEventListener("showTranscriptFromPlayer",function(){this.getData("showChapters")&&this.setData("showChapters",!1),this.showTranscriptVideo()}.bind(this))),addEventListenerTo(this.getData("globalEventListeners"),Lyte.addEventListener("showChaptersFromPlayer",function(){this.getData("showTranscript")&&this.setData("showTranscript",!1),this.setData("showChapters",!this.getData("showChapters"))}.bind(this)))},didDestroy:function(){removeGlobalEventListners(this.getData("globalEventListeners"))},titleObserver:function(){var t=this.getData("notecard");isValidObject(t)&&isValidString(t.name)&&"untitled"!==t.name.toLowerCase()&&this.setData("hasTitle",!0)}.observes("notecard.name").on("init"),showTranscriptVideo:function(t){this.getData("showChapters")&&this.setData("showChapters",!1),this.showTranscriptVideo(t)},getVideoChapters:function(){var t=this.getData("notecard"),e=t.embed_resources[0].resource_id;getVideoChapters(t.notecard_id,e,t.is_shared_note).then(function(t){(t=JSON.parse(t))&&isValidCode(t.code)&&t.chapters&&(this.setData("chapters",t.chapters),t.chapters&&t.chapters.length&&this.getChaptersSprite(this.getData("notecard")))}.bind(this)).catch(function(t){errorLog(t,"getVideoChapters.video-note-editor")}.bind(this))},getChaptersSprite:function(t){getChaptersSprite(t.notecard_id,t.embed_resources[0].resource_id,t.is_shared_note).then(t=>{var e=new FileReader;e.onload=function(t){const e=t.target.result;this.setData("spriteThumbnails",e)}.bind(this),e.readAsDataURL(t)}).catch(t=>{})},showTranscriptVideo:function(t){this.setData("tryNow",t),this.getData("showTranscript")?this.setData("showTranscript",!1):this.setData("showTranscript",!0)},generatePreview:function(t,e){if(!(e>10)){var n=this.getData("notecard"),i=getAllZFiles(n);this.setData("allFiles",i);var a=i[0];a.notecard_id=n.notecard_id;var o=a.name;isValidString(o)||(o=n.name);var r=getFileDetails(o.toLowerCase(),a.type);a.file_type=r.type,a.extension=r.extension,LyteComponent.set(n,"preview_class",r.previewClass),LyteComponent.set(n,"preview_bgcolor",r.bgcolor);var s=!1;isValidObject(n)&&isValidObject(n.embed_resources[0])&&1===n.embed_resources[0].docs_domain&&(s=!0);var l=this;this.setData("contentDownloading",!0),"VIDEO"===a.file_type?getHlsStatusNR(n.notecard_id,a.resource_id).then(function(i){if(i){var o=JSON.parse(i);if(isValidStatus(o.status)){l.getVideoChapters();var r=n.name;isValidString(r)||(r="Untitled"),this.setPreviewData("https://"+document.domain+"/videoPublic.do?resource_id="+encodeURIComponent(a.docs_resource_id)+"&nb_resource_id="+encodeURIComponent(a.notecard_id)+"&title="+encodeURIComponent(r),!0,!0,!1),document.querySelector(".spread-parent").classList.add("video-wrap"),document.querySelector(".card-title").classList.add("video-title"),document.querySelector(".editor-space").classList.add("video-space"),document.querySelector("#preview-iframe").scrolling="no"}else this.getFilePreviewInfo(n,s,a,t,e)}else this.getFilePreviewInfo(n,s,a,t,e)}.bind(this)).catch(function(i){this.getFilePreviewInfo(n,s,a,t,e)}.bind(this)):this.getFilePreviewInfo(n,s,a,t,e)}},getFilePreviewInfo:function(t,e,n,i,a){var o=this;if(e)filePreview("GET",getDocsDomain(t)+"/prvsvl/"+n.docs_resource_id+"?extn="+n.extension).then(function(t){if(t&&(t=JSON.parse(t))&&-1!==t.previewStatus)if(t.previewUrl&&"VIDEO"!==n.file_type&&"ZIP"!==n.file_type){previewUrl=t.previewUrl;var e=t.permalink;o.setData("download_url",e),o.setPreviewData(previewUrl,!0,!0,!1)}else t.pubSubConfig?(i>1e4&&(i=1e4),setTimeout(function(){o.generatePreview(i+3e3,++a)},i)):(o.setData("download_url",""),o.setData("contentDownloading",!1));else o.setData("download_url",""),o.setData("contentDownloading",!1)}).catch(function(t){o.setData("download_url",""),o.setData("contentDownloading",!1)});else{var r=getExternalFileUrlForWD()+"/file/"+n.docs_resource_id;this.setPreviewData(r,!0,!0,!1),filePreview("GET",getExternalFileUrlForWD()+"/api/v1/downloadauth/"+n.docs_resource_id).then(function(t){t&&t.DOWNLOAD_LINK?(o.setData("download_url",t.DOWNLOAD_LINK),o.setData("contentDownloading",!1)):(o.setData("download_url",""),o.setData("contentDownloading",!1))}).catch(function(t){o.setData("download_url",""),o.setData("contentDownloading",!1)})}},setPreviewData:function(t,e,n,i){var a=this.getData("allFiles");if(a.length>0){var o=a[0];LyteComponent.set(o,"docs_preview_url",t)}this.setData("isIframeLoad",e),this.setData("hasPreview",n),this.setData("contentDownloading",i)}}),Lyte.Component.register("chapters-view",{_template:'<template tag-name="chapters-view" style="width:100%;height: 100%;"> <div class="chapter-wrapper font-puvi row no-gutters col-12 w-100 h-100" style="background-color:#1c1c1c;color: #ffffff;"> <div class="chapters-header row no-gutters px-2 mx-1 col-12 justify-content-between mt-2"> <span class="fs-l px-1">{{translate(\'chapters.chapters\')}}</span> </div> <div class="transition-all-400-linear scroll-smooth chapters-body mt-2 row no-gutters col-12 overflow-auto" onscroll="{{action(\'wrapperScroll\',this)}}"> <div class="transition-all-400-linear scroll-smooth row no-gutters col-12 d-flex flex-nowrap overflow-scroll"> <template is="if" value="{{expHandlers(chapters,\'&amp;&amp;\',chapters.length)}}"><template case="true"> <template is="for" items="{{chapters}}" item="chapter" index="index"> <div class="each-chapter-wrap row no-gutters p-1 mr-1 flex-column br-r transition-all-300-linear position-relative {{if(expHandlers(currentVideoTime,\'===\',chapter.offset_in_sec),\'highlight-chap\')}} {{if(expHandlers(currentVideoTime,\'===\',chapter.offset_in_sec),\'focus-chap\')}}" id="{{chapter.offset_in_sec}}" onclick="{{action(\'selectChapter\',chapter,index)}}"> <div class="chap-detail p-1 py-2 br-r transition-all-300-linear position-relative"> <div class="chapter-thumbnail-preview bl-grey px-1 br-r mx-1 zindex-10" style="background-image:url(\'{{spriteThumbnails}}\');background-position: 0 -{{expHandlers(index,\'*\',80)}}px; background-repeat: no-repeat;"> </div> <div class="chapter-description row d-flex flex-column px-4 position-relative"> <div class="row no-gutters chapter-time fs-xs py-1">{{timeRegText(chapter.offset_in_sec,showHrsTime)}}</div> <div class="row no-gutters fs-m d-inline-block text-left text-wrap-in-3l chap-text-details-wrap {{if(characLength(chapter.data),\'more-text-chapter\')}}" data-prop="{{chapter}}" style="max-width: 140px;word-break: break-word; overflow: hidden;display: -webkit-box!important; -webkit-line-clamp: 3;-webkit-box-orient: vertical;"> <template is="if" value="{{chapter.data.title}}"><template case="true"> <p class="fw-900 font-puvi-bold p-0 m-0">{{chapter.data.title}} </p> </template><template case="false"> <p class="fw-900 p-0 m-0">{{translate("chapters.noTitle")}}</p> </template></template> <template is="if" value="{{chapter.data.description}}"><template case="true"> <p class="o-6 m-0" style="line-height:25px;">{{chapter.data.description}}</p> </template></template> </div> <template is="if" value="{{characLength(chapter.data)}}"><template case="true"> <div class="text-left cursor-pt fs-m color-blue-strict py-1" onclick="{{action(\'moreToViewChapterInfo\',chapter)}}">{{translate(\'options.more\')}}</div> </template></template> </div> </div> </div> </template> </template><template case="false"> <div class="row no-gutters justify-content-center col-12 fs-m"> <div class="col-12 my-2 text-center">{{translate("chapters.noChapterAvailable")}}</div> </div> </template></template> </div> </div> <template is="if" value="{{showLeftNavIcon}}"><template case="true"> <div class="position-absolute left-0 bottom-0 gradient-left col-1" style="height: 85%!important;"></div> <div class="icon-58 br-50 cursor-pt position-absolute left-0 chapter-nav-button p-2 nav-right transition-all-300-linear m-1 mx-2 o-0" onclick="{{action(\'scrollChapters\',\'left\')}}"> <div class="inext-icon icon-m m-1 rotate-180"></div> </div> </template></template> <template is="if" value="{{showRightNavIcon}}"><template case="true"> <div class="position-absolute right-0 bottom-0 gradient-right col-1" style="height: 85%!important;"></div> <div class="icon-58 br-50 cursor-pt position-absolute right-0 o-0 chapter-nav-button p-2 nav-left transition-all-300-linear m-1 mx-2 o-0" onclick="{{action(\'scrollChapters\',\'right\')}}"> <div class="inext-icon icon-m m-1"></div> </div> </template></template> </div> <template is="if" value="{{displayVideoChapters}}"><template case="true"> <video-chapters chapters="{{lbind(chapters)}}" is-more-screen="{{isMoreScreen}}" more-chapter-info="{{moreChapterInfo}}" create-origin-element="{{createOriginElement}}" is-list-view="{{isListView}}" sprite-thumbnails="{{lbind(spriteThumbnails)}}" display-video-chapters="{{lbind(displayVideoChapters)}}" notecard="{{notecard}}"></video-chapters> </template></template> </template>\n<style>.chapter-thumbnail-preview{\n    height: 80px;\n    width: 150px;\n}\n\n.each-chapter-wrap{\n    height: 245px;\n    width: 175px;\n}\n.chapters-body::-webkit-scrollbar{\n    display: none;\n}\n\n.chap-desc{\n    height: 40px;\n    overflow: hidden;\n    word-break: break-word;\n}\n\n.each-chapter-wrap:hover , .each-chapter-wrap.highlight-chap{\n    background-color: #333;   \n}\n\n.each-chapter-wrap:hover .menu-chapter{\n    opacity: 1!important;\n}\n\n.chapter-nav-button {\n    background: #ffffff66;\n    bottom: 22%;\n}\n\n.chapter-nav-button:hover {\n    opacity: 1!important;\n}\n\n.chapter-wrapper:hover .nav-right, .chapter-wrapper:hover .nav-left {\n    opacity: 1!important;\n}\n\n.gradient-right {\n    background: linear-gradient(90deg, transparent 5%, #000000);\n}\n\n.gradient-left {\n    background: linear-gradient(90deg, #000000 5%, transparent);\n}\n\n/* .more-text-chapter::after{\n    content: \'more\';\n    position: absolute;\n    font-size: 12px;\n    cursor: pointer;\n    bottom: 0;\n    right: 0;\n    padding-left: 5px;\n} */</style>',_dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'background-image:url(''","spriteThumbnails","'');background-position: 0 -'",{type:"helper",value:{name:"expHandlers",args:["index","'*'",80]}},"'px; background-repeat: no-repeat;'"]}}}},{type:"text",position:[1,1,3,1,0]},{type:"attr",position:[1,1,3,3]},{type:"attr",position:[1,1,3,3,1]},{type:"if",position:[1,1,3,3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,3,3,3]},{type:"if",position:[1,1,3,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,3,5]},{type:"if",position:[1,1,3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"text",position:[1,1,0]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[3]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[3]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["chapters","gridClass","isSharedPage","spriteThumbnails","timings","globalEventListeners","notecard","moreChapterInfo","displayVideoChapters","isMoreScreen","showLeftNavIcon","showRightNavIcon"],data:function(){return{chapters:Lyte.attr("array",{default:[]}),gridClass:Lyte.attr("boolean",{default:!1}),isSharedPage:Lyte.attr("boolean",{default:!1}),spriteThumbnails:Lyte.attr("string",{default:""}),timings:Lyte.attr("array",{default:[]}),globalEventListeners:Lyte.attr("array",{default:[]}),notecard:Lyte.attr("object"),moreChapterInfo:Lyte.attr("object"),displayVideoChapters:Lyte.attr("boolean",{default:!1}),isMoreScreen:Lyte.attr("boolean",{default:!1}),showLeftNavIcon:Lyte.attr("boolean",{default:!1}),showRightNavIcon:Lyte.attr("boolean",{default:!1})}},init:function(){-1!==Lyte.Router.getRouteInstance().transition.target.indexOf("shared")&&this.setData("isSharedPage",!0)},didConnect:function(){setTimeout(function(){this.setData("gridClass",!0)}.bind(this),300),addEventListenerTo(this.getData("globalEventListeners"),Lyte.addEventListener("chapterTimeUpdateFromVideo",function(t){this.highlightChapterRegTime(t)}.bind(this)))},displayVideoChaptersObserver:function(){this.getData("displayVideoChapters")||this.setData({isMoreScreen:!1,moreChapterInfo:{}})}.observes("displayVideoChapters"),chapterObserver:function(){var t=[],e=this.getData("chapters");e.forEach(e=>{t.push(e.offset_in_sec)}),this.setData("timings",t),e.filter(t=>t.offset_in_sec>3599).length?this.setData("showHrsTime",!0):this.setData("showHrsTime",!1)}.observes("chapters").on("init"),highlightChapterRegTime:function(t){var e=this.getData("timings");if(e&&e.length){var n=t-2,i=e.reduce(function(t,e){return Math.abs(e-n)<Math.abs(t-n)?e:t});this.setData("currentVideoTime",i);var a=document.querySelector(".focus-chap").offsetLeft,o=document.querySelector(".chapters-body"),r=document.querySelector(".chapter-wrapper").offsetWidth-100,s=parseInt(a/r);s||(s=1),a>r*s&&o.scrollLeft<s*r?o.scrollLeft=s*r:o.scrollLeft=a}},didDestroy:function(){removeGlobalEventListners(this.getData("globalEventListeners"))},showEditChapters:function(t){t?this.setData({displayVideoChapters:!1}):(this.setData("createOriginElement","#add-chapters"),this.setData("displayVideoChapters",!0))},showMoreInfoWindow:function(t){this.setData("moreChapterInfo",t),this.setData("isMoreScreen",!0),this.setData("displayVideoChapters",!0)},actions:{selectChapter:function(t){eventsToVideoIframe(t.offset_in_sec)},moreToViewChapterInfo:function(t){this.showMoreInfoWindow(t)},scrollChapters:function(t){var e=document.querySelector(".chapters-body"),n=e.scrollLeft;if("right"===t){let t=300+n;e.scrollTo(t,0)}else{let t=n-200;e.scrollTo(t,0)}},wrapperScroll:function(t){var e=Math.round(t.scrollLeft+t.clientWidth);t.scrollLeft>0&&e<t.scrollWidth?(this.setData("showLeftNavIcon",!0),this.setData("showRightNavIcon",!0)):0==t.scrollLeft?(this.setData("showLeftNavIcon",!1),this.setData("showRightNavIcon",!0)):e==t.scrollWidth&&(this.setData("showRightNavIcon",!1),this.setData("showLeftNavIcon",!0))}}}),Lyte.Component.register("video-chapters",{_template:'<template tag-name="video-chapters"> <div class="position-absolute left-0 bottom-0 top-0 right-0 h-100 w-100"> <div class="h-100 transition-all-300-linear flex-column d-flex resource-activity-modal overflow-auto overflow-x-hidden hide-scrollbar p-1 {{if(isNightModeEnabled,\'bg-335\',\'bg-f\')}} rounded-lg" id="video-chapters-wrap" style="overflow:auto;"> <div class="add-chapter row no-gutters add-div zindex-1 bg-inherit py-2"> <div class="col-xs-auto mx-auto fs-l fw-400 py-1"> {{translate("chapters.chapter")}} </div> <div class="position-absolute top-0 right-0 inote-option m-2 cancel-mark inote-option-black iclose-dim transform-scale-1-5" style="margin-right: 28px !important;margin-top: 15px !important;" onclick="{{action(\'closeVideoChapters\')}}"></div> <div class="thumbnail-preview-wrap br-xs mx-auto bg-efe my-1 mt-2 overflow-hidden {{if(generatedThumbnail,\'border-r\')}}" style="width: 90%;height:150px;"> <template is="if" value="{{generatedThumbnail}}"><template case="true"> <img class="thumbnail-generated-preview img-preview-chapter" src="{{generatedThumbnail}}"> </template><template case="false"> <div class="thumbnail-gen-preview {{if(isNightModeEnabled,\'o-6\')}} icon-xll m-1 icon-xxxl col-xl-auto preview iimage-note-preview mx-auto my-4 transform-scale-1" style="margin-top:45px!important;"></div> </template></template> </div> <div class="col-12 row no-gutters transition-all-300-linear input-light-grey add-div" style="max-height:80%;"> <div class="{{if(expHandlers(maxHourLimit,\'>\',0),\'col-3\',\'col-2\')}} ml-3 add-div bg-transparent"> <div class="br-xs m-1 p-1 py-2 time-wrap fs-s"> <template is="if" value="{{expHandlers(maxHourLimit,\'>\',0)}}"><template case="true"> <input type="number" id="chap-hours" style="width:20px;" disabled="" class="fs-s no-border-outline border-9-bottom appearance-none bg-transparent {{if(isNightModeEnabled,\'color-fff\')}}" placeholder="00" min="0" max="{{maxHourLimit}}" data-max="{{maxHourLimit}}" value="00"> : </template></template> <input type="number" id="chap-minutes" style="width:20px;" disabled="" class="fs-s no-border-outline border-9-bottom appearance-none py-1 bg-transparent {{if(isNightModeEnabled,\'color-fff\')}}" placeholder="00" min="0" max="{{maxMinLimit}}" data-max="{{maxHourLimit}}" value="00"> : <input type="number" id="chap-seconds" style="width:20px;" disabled="" class="fs-s no-border-outline border-9-bottom appearance-none py-1 bg-transparent {{if(isNightModeEnabled,\'color-fff\')}}" placeholder="00" min="0" max="{{maxSecLimit}}" data-max="{{maxMinLimit}}" value="00"> </div> </div> <div class="{{if(expHandlers(maxHourLimit,\'>\',0),\'col-8\',\'col-9\')}} add-div "> <div class="br-xs my-1 p-1"> <div class="br-xs fs-m chapter-input new add-div p-1 pt-2" style="word-break: break-word;">{{titleInput}}</div> </div> </div> <div class="add-div add-div col-11 mx-auto p-0 shakable-elem"> <div class="br-xs fs-m chapter-input new add-div p-1 pt-2" style="max-height: 200px;min-height: 100px;overflow:auto;white-space: break-spaces;">{{descriptionInput}}</div> </div> </div> </div> </div> </div> </template>\n<style>.chapter-input::placeholder {\n    color: grey;\n}\n\n.each-chapter:hover .chapter-delete{\n    opacity: 1!important;\n}\n\ninput[type=number]::-webkit-inner-spin-button, \ninput[type=number]::-webkit-outer-spin-button { \n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    margin: 0; \n}\n\ninput:focus > .shakable-elem{\n    border :1px solid #eee;\n}\n\nvideo-chapters .chapter-description{\n    min-height: 150px;\n    max-height: 200px;\n    overflow: scroll;\n}\n\ndiv[contenteditable=true]:empty:before {\n    content:attr(data-text);\n    color:gray\n  }\n\n  div:empty:not(:focus):before {\n\tcontent: attr(data-text);\n     color: #999999;\n}\n\n.each-chapter:hover .each-chapter-menu {\n    opacity: 1!important;\n}\n\n.margin-left-n65{\n    margin-left: -65px!important;\n}\n\ntextarea#chapter-desc, input#chapter-title {\n    background-color: inherit;\n}\n\n.img-preview-chapter{\n    width: 100%;\n    height: 100%;\n}\n\ntextarea#chapter-desc {\n    min-height: 150px;\n    max-height: 200px;\n}\n\n.is-more-screen.max-height textarea#chapter-desc{\n    min-height: 150px;\n    max-height: 200px;\n}\n\ninput#chapter-title::placeholder, textarea#chapter-desc::placeholder{\n    color: inherit!important;\n}\n\ninput#chapter-title::-ms-input-placeholder, textarea#chapter-desc::-ms-input-placeholder{\n    color: inherit!important;\n}\n\nlyte-input input:disabled{\n    color: inherit!important;\n}\n\nlyte-input:focus{\n    border: 1px solid green!important;\n}\n\n#video-chapters-wrap{\n    position: fixed;\n    top:0;\n    left:0;\n    right: 0;\n    bottom:0;\n    margin:auto;\n    width: 410px;\n    height: 500px;\n    max-height: 60%;\n\n}</style>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"attr",position:[1,1,1,5]},{type:"attr",position:[1,1,1,5,1]},{type:"if",position:[1,1,1,5,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,1,1,7,1]},{type:"attr",position:[1,1,1,7,1,1,1]},{type:"if",position:[1,1,1,7,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{}}]}},default:{}},{type:"attr",position:[1,1,1,7,1,1,3],attr:{}},{type:"attr",position:[1,1,1,7,1,1,5],attr:{}},{type:"attr",position:[1,1,1,7,3]},{type:"text",position:[1,1,1,7,3,1,1,0]},{type:"text",position:[1,1,1,7,5,1,0]}],_observedAttributes:["displayVideoChapters","showAddChapter","titleAlert","timeAlert","isUpdate","updateChapter","chapterAdding","hideAddChap","timeInput","titleInput","descriptionInput","contentDownloading","editInMoreScreen","videoDetails","lastThumbnailGenTime","generatedThumbnail","maxHourLimit","maxMinLimit","maxSecLimit","isWhiteDots","chapters","ltPropHeight","globalEventListeners","ltPropOffset"],data:function(){return{displayVideoChapters:Lyte.attr("boolean",{default:!1}),showAddChapter:Lyte.attr("boolean",{default:!1}),titleAlert:Lyte.attr("boolean",{default:!1}),timeAlert:Lyte.attr("boolean",{default:!1}),isUpdate:Lyte.attr("boolean",{default:!1}),updateChapter:Lyte.attr("object",{default:{}}),chapterAdding:Lyte.attr("boolean",{default:!1}),hideAddChap:Lyte.attr("boolean",{default:!1}),timeInput:Lyte.attr("string",{default:"00 : 00"}),titleInput:Lyte.attr("string",{default:""}),descriptionInput:Lyte.attr("string",{default:""}),contentDownloading:Lyte.attr("boolean",{default:!1}),editInMoreScreen:Lyte.attr("boolean",{default:!1}),videoDetails:Lyte.attr("object",{default:{}}),lastThumbnailGenTime:Lyte.attr("number",{default:0}),generatedThumbnail:Lyte.attr("string",{default:""}),maxHourLimit:Lyte.attr("string",{default:""}),maxMinLimit:Lyte.attr("string",{default:""}),maxSecLimit:Lyte.attr("string",{default:""}),isWhiteDots:Lyte.attr("boolean",{default:!0}),chapters:Lyte.attr("array",{default:[]}),ltPropHeight:Lyte.attr("string",{default:"100%"}),globalEventListeners:Lyte.attr("array",{default:[]}),ltPropOffset:Lyte.attr("string",{default:'{"top":"0","right":"0"}'})}},didConnect:function(){this.getData("isListView")&&(toggleNotebookList({isToggle:!0}),this.setData("ltPropHeight","calc(100% - 64px)"),this.setData("ltPropOffset",'{"top":"56","right":"8"}'));var t=document.querySelector("#preview-iframe").contentDocument.getElementsByClassName("rtcmediaplayervideo")[0],e={duration:t.duration};this.setData("videoDetails",e);var n=secondsToHMS(t.duration,"HH:MM:SS");const[i,a,o]=n.split(":").map(Number);this.setData({maxHourLimit:i,maxMinLimit:a,maxSecLimit:o}),this.getData("chapters").filter(t=>t.offset_in_sec>3599).length?this.setData("showHrsTime",!0):this.setData("showHrsTime",!1),"#add-chapters"===this.getData("createOriginElement")&&this.showAddChapter(),addEventListenerTo(this.getData("globalEventListeners"),Lyte.addEventListener("chapterActionsFromParent",function(e,n){"edit"===e&&(this.editChapter(n),(t=document.querySelector("#preview-iframe").contentDocument.getElementsByClassName("rtcmediaplayervideo")[0]).pause())}.bind(this)))},didDestroy:function(){this.getData("isListView")&&toggleNotebookList(),removeGlobalEventListners(this.getData("globalEventListeners")),this.closeVideoChapters()},alertObserver:function(){document.querySelector("lyte-popover.lytePopoverOpened")&&document.querySelector("lyte-popover.lytePopoverOpened").alignPopover()}.observes("timeAlert","titleAlert"),titleDescsObserver:function(){var t=this.getData("descriptionInput"),e=this.getData("titleInput");(t||e)&&this.setData("titleAlert",!1)}.observes("descriptionInput","titleInput"),closeVideoChapters:function(){this.setData("showAddChapter",!1),this.setData("displayVideoChapters",!1)},chaptersObserver:function(){this.getData("chapters").filter(t=>t.offset_in_sec>3599).length?this.setData("showHrsTime",!0):this.setData("showHrsTime",!1)}.observes("chapters.[]"),isMoreScreenObserver:function(){this.getData("isMoreScreen")&&setTimeout(function(){var t=this.getData("moreChapterInfo");this.editChapter(t)}.bind(this),0)}.observes("isMoreScreen").on("init"),editInMoreScreenObserver:function(){this.editChapter(this.getData("moreChapterInfo"))}.observes("editInMoreScreen"),showChapterObserver:function(){this.getData("showAddChapter")?setTimeout(()=>{this.setData("hideAddChap",!0)},200):(this.setData({titleInput:"",descriptionInput:""}),this.setData("hideAddChap",!1),this.setData("chapterAdding",!1),this.setData("isUpdate",!1),this.setData("updateChapter",{}),this.setData("generatedThumbnail",""))}.observes("showAddChapter").on("init"),deleteChapter:function(t){showCentreAlert(this,"delete_chapter_alert",translate.chapters.deleteChapter,translate.options.delete,translate.options.cancel,!0);var e=Lyte.addEventListener("delete_chapter_alert",function(n){if(n){var i=this.getData("notecard"),a=i.embed_resources[0].resource_id,o=this.getData("chapters");this.setData("chapterAdding",!0);var r=o.findIndex(e=>e.eventid===t.eventid);Lyte.arrayUtils(o,"removeAt",r),updateVideoChapters("DELETE",i.notecard_id,a,t.eventid).then(async function(){sendAnalyticsEvent(CATEGORIES.get("CHAPTER"),ACTIONS.get("CHAPTER_DELETE")),o||this.setData("showAddChapter",!1),this.setData("chapterAdding",!1)}.bind(this)).catch(function(t){this.setData("showAddChapter",!1),this.setData("chapterAdding",!1),errorLog(t,"deleteChapter.video-chapters")}.bind(this))}Lyte.removeEventListener(e)}.bind(this))},editChapter:function(t){this.setData("updateChapter",t),this.setData("isUpdate",!0),this.setData("showAddChapter",!0),this.setData("titleInput",t.data.title?t.data.title:""),this.setData("descriptionInput",t.data.description?t.data.description:"");var[e,n,i]=secondsToHMS(t.offset_in_sec,"HH:MM:SS").split(":");parseInt(e)&&(document.querySelector("#chap-hours").value=e),document.querySelector("#chap-minutes").value=n,document.querySelector("#chap-seconds").value=i,this.generateInstantThumbnail()},removeInputAlertIt:function(t,e){e&&this.showChapterAlert(translate.chapters.timeRestriction,"time");var n=t.closest(".shakable-elem");n.classList.add("shake-anim"),setTimeout(()=>{n.classList.remove("shake-anim")},400),t.value=""},showAddChapter:function(t){if(this.setData("showAddChapter",!0),t)i&&(document.querySelector("#chap-hours").value=""),document.querySelector("#chap-minutes").value="",document.querySelector("#chap-seconds").value="",this.setData({titleInput:"",descriptionInput:""});else{var e=document.querySelector("#preview-iframe").contentDocument.getElementsByClassName("rtcmediaplayervideo")[0],n=secondsToHMS(e.currentTime,"HH:MM:SS"),[i,a,o]=n.split(":").map(Number);setTimeout(function(){i&&(document.querySelector("#chap-hours").value=addLeadingZero(i)),document.querySelector("#chap-minutes").value=addLeadingZero(a),document.querySelector("#chap-seconds").value=addLeadingZero(o),this.generateInstantThumbnail()}.bind(this),300)}},showChapterAlert:function(t,e){"time"===e?this.setData("timeAlert",!0):"title"===e&&this.setData("titleAlert",!0),this.setData("alertMessageForChapter",t),this.setData("showChapterAlert",!0),this.setData("chapterAdding",!1)},hideChapterAlert:function(){this.setData({showChapterAlert:!1,titleAlert:!1}),this.setData("alertMessageForChapter","")},generateThumbnailForSelectedTime:async function(t){var e=this.getData("lastThumbnailGenTime");if(0===e||e!==t){var n=await generateThumbnailFromVideo(t);this.setData({lastThumbnailGenTime:t,generatedThumbnail:n.image.src})}},generateInstantThumbnail:function(){var t=0;document.querySelector("#chap-hours")&&(t=document.querySelector("#chap-hours").value);var e=document.querySelector("#chap-minutes").value,n=document.querySelector("#chap-seconds").value,i=timeToSeconds(t+":"+e+":"+n);document.querySelector("#chap-hours")&&parseInt(t)>-1?this.generateThumbnailForSelectedTime(i):!document.querySelector("#chap-hours")&&parseInt(e)>-1&&parseInt(n)>-1?this.generateThumbnailForSelectedTime(i):this.setData({lastThumbnailGenTime:0,generatedThumbnail:""})},enableEditInMoreScreen:function(){this.setData("editInMoreScreen",!0)},actions:{closeVideoChapters:function(){this.closeVideoChapters()},inputFocus:function(t){this.setData("highlightingField","time"),t.select()},fieldFocussed:function(t){"title"===t?this.setData("highlightingField","title"):"desc"===t&&this.setData("highlightingField","desc")},enableEditInMoreScreen:function(){this.enableEditInMoreScreen()},timeFocusOut:function(){this.generateInstantThumbnail()},wrapperClick:function(t){return t.className.includes("add-div")||(this.setData("isUpdate",!1),this.setData("showAddChapter",!1)),!1},showAddChapter:function(){this.showAddChapter()},cancelChapter:function(){this.getData("editInMoreScreen")?this.setData("editInMoreScreen",!1):(this.setData("isUpdate",!1),this.setData("showAddChapter",!1),this.setData("displayVideoChapters",!1))}},methods:{closeVideoChapters:function(){this.closeVideoChapters()},onBeforeCloseWrapperOption:function(t){if(t&&t.target&&t.target.tagName&&(t.target.classList.contains("lytemenufreezelayer")||t.target.tagName.toLowerCase().includes("lyte-menu")||t.target.classList.contains("lyte-menu-text")))return!1}}},{mixins:["card-util"]}),Lyte.Component.register("transcript-video",{_template:'<template tag-name="transcript-video"> <template is="if" value="{{expHandlers(expHandlers(notecard.type,\'===\',&quot;note/video&quot;),\'||\',expHandlers(notecard.type,\'===\',&quot;note/file&quot;))}}"><template case="true"> <div class="h-100 w-100 flex-column d-flex transcript-video-modal overflow-auto hide-scrollbar px-1 position-relative" style="{{backgroundcolorstyle(sliderBgColor)}}"> <div class="sticky-top pl-3"> <div class="row no-gutters pt-2 fs-m justify-content-between transcript-top-bar" style="{{backgroundcolorstyle(sliderBgColor)}}"> <div class="col-xs-auto fs-l">{{translate(\'premium.transcriptTitle\')}}</div> </div> </div> <div class="px-2 h-100 transition-all-300-linear {{if(showOverlimit,\'fade-out-item d-none\',\'fade-in-item d-block\')}}"> <template is="if" value="{{expHandlers(transcriptLoading,\'||\',notecard.transcript_initiated)}}"><template case="true"> <div class="col-12 p-2 my-4 justify-content-center text-center fade-in-item d-block"> <div class="col-12 my-4 fade-in-item d-block"> <dots-loading white-dots="{{isWhiteDots}}"></dots-loading> </div> <div class="py-4 fs-m text-center"> <p class="col-12 p-0 px-4 mx-auto">{{translate("premium.transcribeOnProcess")}}</p> </div> </div> </template><template case="false"><template is="if" value="{{expHandlers(transcripts.length,\'!\')}}"><template case="true"> <div class="col-12 p-2 py-4 my-4 justify-content-center text-center fade-in-item d-block"> <template is="if" value="{{featureNotAvailable}}"><template case="true"> <div class="p-2 px-4 m-4 fs-m">{{translate("premium.notAvailableForRegion")}}</div> </template><template case="false"> <template is="if" value="{{showTryAgain}}"><template case="true"> <div class="p-2 m-2 mt-4 fs-m"> {{translate("premium.transcribeError")}}</div> </template><template case="false"> <div class="p-2 m-2 mt-4 fs-m"> {{translate("premium.noTranscript")}}</div> </template></template> </template></template> </div> </template><template case="false"><template is="if" value="{{transcripts.length}}"><template case="true"> <div class="row no-gutters p-2 position-relative no-scroll transition-all-300-linear {{moreOptionsClass}}" id="transcript-vid-wrapper" style="max-height:98%;overflow-x:hidden;overflow-y: scroll;padding-bottom: 10px!important;"> <template is="for" items="{{transcripts}}" item="transcript" index="index"> <template is="forIn" object="{{transcript}}" value="value" key="key"> <div class="col-12 row no-gutters p-2 br-r mb-1 each-transcript transition-all-300-linear {{if(expHandlers(currentAudio,\'===\',timeformat(key,true)),\'highlight-box\')}}" id="{{timeformat(key,true)}}" onclick="{{action(\'selectTranscript\',transcript,timeformat(key,true))}}"> <div class="col-xs-auto py-1 justify-content-center my-auto"> <div class="fs-s row no-gutters p-0 p-1 d-inline-block text-wrap br-xs o-6">{{timeformat(key)}}</div> </div> <div class="col-xs-auto p-2"> <div class="col-12 fs-s row no-gutters p-0 d-inline-block text-left">{{value}}</div> </div> </div> </template> </template> </div> </template></template></template></template></template></template> </div> </div> </template></template> </template>\n<style>\n.white .each-transcript:hover, .whitebgbtn{\n    background-color: #ffffff1a!important;\n}\n\n.black .each-transcript:hover, .darkbgbtn{\n    background-color: #0000001a!important;\n}\n\n.create-text-audio:hover{\n    background-color: rgba(0,0,0,0.15);\n}\n\n.transcript {\n\tz-index: 1000001;\n}\n\n.transcript lyte-popover-content {\n    padding: 0px!important;\n}\n\n.fade-in-item { animation: fadeTransIn 2s; }\n.fade-out-item { animation: fadeTransOut 2s; }\n\n@keyframes fadeTransIn {\n    0% { \n        opacity: 0; \n        display:none;\n    }\n    100% { \n        display:block;\n        opacity: 1; \n    }\n  }\n\n  @keyframes fadeTransOut {\n    0% { \n        display:block;\n        opacity: 1; \n    }\n    100% { \n        opacity: 0; \n        display:none;\n    }\n  }</style>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"backgroundcolorstyle",args:["sliderBgColor"]}}}},{type:"attr",position:[1,1,1],attr:{style:{name:"style",helperInfo:{name:"backgroundcolorstyle",args:["sliderBgColor"]}}}},{type:"text",position:[1,1,1,1,0]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"text",position:[1,3,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"forIn",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1,0]},{type:"text",position:[1,3,1,0]}]}]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["notecard","isWhiteDots","transcripts","noTranscripts","isAudioCard","timings","ltPropHeight","sliderBgColor","ltPropOffset","transcriptLoading","showTryAgain","tryNow","featureNotAvailable","allowedTime","consumedTime","nightModeEnabled","showOverlimit","transcriptAsWords","globalEventListeners"],data:function(){return{notecard:Lyte.attr("object",{default:{}}),isWhiteDots:Lyte.attr("boolean",{default:!0}),transcripts:Lyte.attr("array",{default:[]}),noTranscripts:Lyte.attr("boolean",{default:!1}),isAudioCard:Lyte.attr("boolean",{default:!1}),timings:Lyte.attr("array",{default:[]}),ltPropHeight:Lyte.attr("string",{default:"100%"}),sliderBgColor:Lyte.attr("string"),ltPropOffset:Lyte.attr("string",{default:'{"top":"0","right":"0"}'}),transcriptLoading:Lyte.attr("boolean",{default:!1}),showTryAgain:Lyte.attr("boolean",{default:!1}),tryNow:Lyte.attr("boolean",{default:!1}),featureNotAvailable:Lyte.attr("boolean",{default:!1}),allowedTime:Lyte.attr("string"),consumedTime:Lyte.attr("string"),nightModeEnabled:Lyte.attr("boolean",{default:!1}),showOverlimit:Lyte.attr("boolean",{default:!1}),transcriptAsWords:Lyte.attr("array",{default:[]}),globalEventListeners:Lyte.attr("array",{default:[]})}},init:function(){var t=this.getData("notecard");"note/audio"===t.type&&this.setData("isAudioCard",!0);var e=this.getData("notecard"),n=getColorForEditorSliderMixin(e.color,e);this.setData({sliderBgColor:n.rgbColor,lineColor:n.lineColor}),"note/video"!==t.type&&"note/file"!==t.type||this.setData("sliderBgColor","#1C1C1C");var i=!e.textColorBlack;this.setData("noteOptionsClass",i?"inote-option-white":"inote-option-black"),this.setData("moreOptionsClass",i?"white":"black"),this.setData("isWhiteDots",i),this.setData("noteOptionsContainerClass",i?"options-container-white":"options-container-black")},didConnect:function(){this.setData("contentDownloading",!0);this.getData("notecard");this.getData("isListView")&&(toggleNotebookList({isToggle:!0}),this.setData("ltPropHeight","calc(100% - 64px)"),this.setData("ltPropOffset",'{"top":"56","right":"8"}')),addEventListenerTo(this.getData("globalEventListeners"),Lyte.addEventListener("transcriptInitiatedSuccess",function(t){var e=this.getData("notecard"),n=e.embed_resources[0].resource_id;if(setValue(e,"transcript_available",!0),t===n){var i=peekRecord("embed-resource",n);e.embed_resources[0].transcript_available=!0,setValue(i,"transcript_available",!0),this.getTranscript()}}.bind(this))),this.getTranscript(),addEventListenerTo(this.getData("globalEventListeners"),Lyte.addEventListener("timeUpdateFromVideo",function(t){if("note/audio"!==this.getData("notecard").type){var e=this.getData("timings");if(e&&e.length){var n=t-2,i=e.reduce(function(t,e){return Math.abs(e-n)<Math.abs(t-n)?e:t});if(this.setData("currentAudio",i),document.querySelector(".highlight-box")){var a=document.querySelector(".highlight-box").offsetTop,o=document.querySelector("#transcript-vid-wrapper"),r=document.querySelector(".transcript-video-modal ").offsetHeight-100,s=parseInt(a/r);s||(s=1),a>r*s&&o.scrollTop<s*r&&(o.scrollTop=s*r)}}}}.bind(this)))},didDestroy:function(){removeGlobalEventListners(this.getData("globalEventListeners")),this.getData("isListView")&&toggleNotebookList()},secondsToReqTime:function(t){var e=secondsToHMS(t,"HH:MM:SS");const[n,i,a]=e.split(":").map(Number);var o="";return n&&(o=n+" hrs"),i&&(o=i+" mins"),a&&(o=a+" sec"),o},getTranscript:function(){var t=this.getData("notecard"),e=t.embed_resources[0].resource_id;t.embed_resources[0].transcript_available&&!t.transcripts?(this.setData("transcriptLoading",!0),getTranscriptForResource(t.notecard_id,e).then(e=>{if(e){const o=JSON.parse(e);if(isValidCode(o.code)&&o.transcript&&o.transcript.length&&o.words){var n;this.setData("transcriptLoading",!1),n=o.words.split("\n\n"),this.setData("transcriptAsWords",n);var i=[],a=o.subtitle;a.forEach(t=>{var e=Object.keys(t).toString();e=e.split("--\x3e")[0];var n=timeToSeconds(e);i.push(n)}),this.setData("timings",i),this.setData("transcripts",a),t.transcripts||setValue(t.embed_resources[0],"transcript_available",!0)}else this.setData("transcriptLoading",!1),this.setData("transcripts",[]),setValue(t,"transcripts",[]),errorLog(err,"getTranscriptForResource.transcript-video")}else this.setData("transcriptLoading",!1),this.setData("transcripts",[]),setValue(t,"transcripts",[]),errorLog(err,"getTranscriptForResource.transcript-video")}).catch(e=>{this.setData("transcriptLoading",!1),this.setData("transcripts",[]),this.setData("transcriptAsWords",[]),setValue(t,"transcripts",[]),errorLog(e,"getTranscriptForResource.transcript-video")})):t.transcripts&&t.transcripts.data.length?(this.setData("timings",t.transcripts.timings),this.setData("transcripts",t.transcripts.data),this.setData("transcriptAsWords",t.transcripts.words)):t.transcript_initiated?this.setData("transcriptLoading",!0):this.getData("tryNow")?this.initiateTranscript():(this.setData("transcriptLoading",!1),this.setData("transcripts",[]),this.setData("transcriptAsWords",[]),setValue(t,"transcripts",[]))},closeTranscript:function(){this.getData("isAudioCard")&&this.throwEvent("eventsToAudioNote",0),this.throwEvent("showTranscriptVideo")},sendAnalyticsForTranscript:function(t){var e="note/audio"===this.getData("notecard").type?CATEGORIES.get("AUDIO_TRANSCRIPTION"):CATEGORIES.get("VIDEO_TRANSCRIPTION");sendAnalyticsEvent(e,t)},actions:{closeTranscript:function(){this.closeTranscript()},selectTranscript:function(t,e){this.getData("isAudioCard")?this.throwEvent("eventsToAudioNote",e):eventsToVideoIframe(e)}},methods:{closeTranscript:function(){this.closeTranscript()}}},{mixins:["card-util","linktextdrop-util"]}),Lyte.Component.register("smart-content-recipe",{_template:'<template tag-name="smart-content-recipe"> <template is="if" value="{{hasResources}}"><template case="true"> <div id="resources-wrapper"> <multiple-resource-preview resources-array="{{resourcesArray}}"> </multiple-resource-preview> </div> </template></template> <div id="recipe-info-container"> <div id="recipe-title">{{notecard.smartContent.name}}</div> <template is="if" value="{{notecard.smartContent.writer}}"><template case="true"> <div id="recipe-author">{{translate("recipe.by")}} <b>{{notecard.smartContent.writer.name}}</b></div> </template></template> <div id="recipe-description"> {{notecard.smartContent.description}} </div> </div> <div id="ingredients-wrapper" style="{{backgroundcolorstyle(ingredientColor)}}"> <div id="ingredients-text" class="recipe-title-text-div">{{translate("recipe.ingredients")}}</div> <div id="ingredients-checklist"> <template is="for" items="{{notecard.smartContent.recipeIngredients}}" item="ingredient" index="index"> <div class="checkbox-item {{if(ingredient.checked,\'checked-item\',\'unchecked-item\')}} no-border"> <div class="checkBox {{if(isWhite,\'white-checkbox\')}} {{if(ingredient.checked,\'checked\')}}"></div> <div class="ingredient-name">{{ingredient.text}}</div> </div> </template> </div> </div> <div id="preparation-wrapper" style="{{backgroundcolorstyle(&quot;#333333&quot;)}}"> <div id="preparation-text" class="recipe-title-text-div">{{translate("recipe.preparation")}}</div> <template is="for" items="{{notecard.smartContent.recipeInstructions}}" item="instruction" index="index"> <div class="recipe-instruction"> <div class="instruction-count recipe-title-text-div" style="color:{{ingredientColor}}">{{instruction.instruction}}</div> <div class="instruction-description">{{instruction.description}}</div> </div> </template> <div class="thin-separator"></div> <div id="source-wrapper"> <div class="source-text">{{translate("recipe.source")}}</div> <a id="source-url" href="{{notecard.smartContent.url}}" target="_blank" rel="noopener noreferrer">{{notecard.smartContent.url}}</a> </div> <template is="if" value="{{notecard.smartContent.copyrightHolder}}"><template case="true"> <div id="copyright-info-wrapper"> <div id="copyright-label">{{translate("recipe.copyright")}}</div> <div id="copyright-title">{{copyRightTitle}}</div> <div id="license-info">{{notecard.smartContent.license}}</div> </div> </template></template> </div> </template>\n<style>.thin-separator {\n    border-top: dotted 1px #666;\n    margin: 32px 12px;\n}\n\n#recipe-title {\n    font-size: 18px;\n    font-weight: bold;\n    text-align: center;\n    margin: 16px auto 8px;\n    font-family: \'Noto Sans\', sans-serif;\n}\n\n#recipe-info-container {\n    text-align: center;\n    margin: 0 5%;\n    font-family: \'Noto Sans\', sans-serif;\n}\n\n#recipe-description {\n    padding: 12px 12px 32px;\n    line-height: 1.75em;\n}\n\n.recipe-title-text-div {\n    margin: 24px 12px 16px;\n    font-weight: bold;\n    display: inline-block;\n    font-family: \'Noto Sans\', sans-serif;\n    font-size: 18px;\n}\n\n.instruction-description {\n    margin: 4px 12px;\n    line-height: 1.75em;\n    color: #eeeeee;\n}\n\n#source-wrapper * {\n    display: inline;\n}\n\n#source-wrapper {\n    margin: 32px 12px 16px;\n    text-align: left;\n    font-family: \'Noto Sans\', sans-serif;\n    word-break: break-word;\n}\n\n.source-text {\n    color: #999999;\n}\n\n#preparation-wrapper {\n    padding: 0 5%;\n    padding-bottom: 16px;\n    text-align: center;\n    color: #eeeeee!important;\n}\n\n.recipe-image {\n    width: 100%;\n    max-height: 400px;\n    position: relative;\n    height: 400px;\n    background-size: cover;\n    background-position: center;\n    ransition: all 0.3s ease;\n\t-webkit-transition: background 0.3s ease;\n\t-moz-transition: background 0.3s ease;\n\t-ms-transition: background 0.3s ease;\n\t-o-transition: background 0.3s ease;\n}\n\n.extraMarginTop {\n    margin-top: 32px;\n}\n\n#recipe-author {\n    margin: 8px auto 12px;\n    font-size: 14px;\n}\n\n#ingredients-wrapper {\n    text-align: center;\n}\n\n#ingredients-checklist {\n    text-align: left;\n    padding-bottom: 24px;\n}\n\n#preparation-text, .recipe-instruction {\n    text-align: left;\n}\n\n.instruction-count {\n    font-size: inherit;\n    margin: 20px 12px 0;\n}\n\n#resources-wrapper {\n    position: relative;\n}\n\n#copyright-info-wrapper {\n    text-align: left;\n    margin: 16px 12px 16px;\n    line-height: 1.75em;\n    opacity: 0.9;\n}\n\n#copyright-info-wrapper * {\n    margin: 8px auto 16px auto;\n    font-size: 14px;\n}\n\n#copyright-label, #copyright-title {\n    display: inline;\n    font-family: \'Noto Sans\', sans-serif;\n}\n\n#source-url {\n    margin-left: 8px;\n    text-decoration: underline;\n    color: inherit;\n}\n\n.ingredient-name {\n    max-width: calc(100% - 30px);\n}\n\n#ingredients-checklist .checkBox{\n    margin: 0.5em 8px 0 0!important;\n}\n\n.recipe-image::after {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    content: "";\n    background: transparent; /* For browsers that do not support gradients */\n    background: -webkit-linear-gradient(top, #212121 0%,transparent 44%,#212121 100%);\n    background: -o-linear-gradient(top, #212121 0%,transparent 44%,#212121 100%);\n    background: -moz-linear-gradient(top, #212121 0%,transparent 44%,#212121 100%);\n    background: linear-gradient(top, #212121 0%,transparent 44%,#212121 100%);\n    opacity: 0.5;\n}\n\n#ingredients-checklist .checkbox-item {\n    margin: 0 5%;\n}\n</style>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"text",position:[3,1,0]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2,0]}]}},default:{}},{type:"text",position:[3,5,1]},{type:"attr",position:[5],attr:{style:{name:"style",helperInfo:{name:"backgroundcolorstyle",args:["ingredientColor"]}}}},{type:"text",position:[5,1,0]},{type:"attr",position:[5,3,1]},{type:"for",position:[5,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]}]},{type:"attr",position:[7],attr:{style:{name:"style",helperInfo:{name:"backgroundcolorstyle",args:["'#333333'"]}}}},{type:"text",position:[7,1,0]},{type:"attr",position:[7,3]},{type:"for",position:[7,3],dynamicNodes:[{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'color:'","ingredientColor"]}}}},{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]}]},{type:"text",position:[7,7,1,0]},{type:"attr",position:[7,7,3]},{type:"text",position:[7,7,3,0]},{type:"attr",position:[7,9]},{type:"if",position:[7,9],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]},{type:"text",position:[1,5,0]}]}},default:{}}],_observedAttributes:["copyRightTitle","ingredientColor","hasResources","resourcesArray"],data:function(){return{copyRightTitle:Lyte.attr("string",{default:""}),ingredientColor:Lyte.attr("string",{default:""}),hasResources:Lyte.attr("boolean",{default:!0}),resourcesArray:Lyte.attr("array",{default:[]})}},resourcesObserver:function(){var t,e=this.get("notecard"),n=e.smartContent.resources,i=!1;if(isValidObject(n)&&n.length>0){this.setData("hasResources",!0);for(var a=0;a<n.length;a++){var o;if(n[a].type.match(/text/))o=n[a].src;else{i||(t=a,i=!0);var r=n[a].src.split("://")[1];o=prependAPIPrefix("public/notecards/"+e.notecard_id+"/resources/"+r)+"?"+getznbcsr()}LyteComponent.set(n[a],"srcUrl",o),n[a].type.match(/image/)?LyteComponent.set(n[a],"isImage",!0):n[a].type.match(/video/)?LyteComponent.set(n[a],"isImage",!1):LyteComponent.set(n[a],"isImage",!0)}if(i){var s=n[t];Lyte.arrayUtils(n,"removeAt",t),Lyte.arrayUtils(n,"unshift",s)}this.setData("resourcesArray",n)}else this.setData("hasResources",!1)}.observes("notecard.smartContent.resources").on("init"),copyRightObserver:function(){var t=this.getData("notecard").smartContent,e=isValidObject(t.copyrightYear)?t.copyrightYear+", ":"",n=isValidObject(t.copyrightHolder)?t.copyrightHolder.name:"";this.setData("copyRightTitle",e+n)}.observes("notecard.smartContent.copyrightHolder","notecard.smartContent.copyrightYear").on("init"),ingredientObserver:function(){var t=this.getData("notecard"),e=t.smartContent.recipeThemeColor;this.setData("ingredientColor",isValidObject(e)?e:t.color)}.observes("notecard.smartContent.recipeThemeColor","notecard.color").on("init"),actions:{toggleRecipeCompletion:function(t){var e=t.checked;LyteComponent.set(t,"checked",!e),this.throwEvent("update")}}}),Lyte.Component.register("multiple-resource-preview",{_template:'<template tag-name="multiple-resource-preview"> <template is="if" value="{{selectedResource.isImage}}"><template case="true"> <div class="recipe-image" style="{{backgroundimagestyle(selectedResource.srcUrl)}}"> </div> </template><template case="false"> <video class="recipe-video" controls=""> <source src="{{selectedResource.srcUrl}}" type="{{selectedResource.type}}"> <a href="{{selectedResource.srcUrl}}">{{translate("generalOption.previewUnavailable")}}</a> </video> </template></template> <template is="if" value="{{showArrow}}"><template case="true"> <template is="if" value="{{expHandlers(hidePrevious,\'!\')}}"><template case="true"> <div id="prev-arrow" class="arrow-div" onclick="{{action(\'goToPrev\')}}" ontouchstart="{{action(\'goToPrev\')}}"></div> </template></template> <template is="if" value="{{expHandlers(hideNext,\'!\')}}"><template case="true"> <div id="next-arrow" class="arrow-div" onclick="{{action(\'goToNext\')}}" ontouchstart="{{action(\'goToNext\')}}"></div> </template></template> <div id="dots-container"> <template is="for" items="{{resourcesArray}}" item="resource" index="index"> <div class="resource-dot"> </div> </template> </div> </template></template> </template>\n<style>.resource-dot {\n    background: rgba(0,0,0,0.50);\n    border-radius: 50%;\n    width: 7px;\n    height: 7px;\n    position: relative;\n    display: inline-block;\n    margin: 16px 1px 0;\n    box-shadow: 0 2px 4px 0 #FFFFFF;\n}\n\n#dots-container {\n    text-align: center;\n}\n\n#prev-arrow {\n    background-position: 0px 0px;\n    left: 32px;\n}\n\n#next-arrow {\n    background-position: -64px 0px;\n    right: 32px;\n}\n\n.arrow-div {\n    background-image: url("/public/icon-assets/arrow-img-next-prev.png");\n    height: 64px;\n    width: 64px;\n    position: absolute;\n    top: 50%;\n    margin-top: -32px;\n    cursor: pointer;\n    display: none;\n}\n\n#resources-wrapper:hover .arrow-div {\n    display: block;\n}\n</style>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"backgroundimagestyle",args:["selectedResource.srcUrl"]}}}}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[5,1]},{type:"for",position:[5,1],dynamicNodes:[]}]}},default:{}}],_observedAttributes:["hidePrevious","hideNext","showArrow","selectedResource"],data:function(){return{hidePrevious:Lyte.attr("boolean",{default:!1}),hideNext:Lyte.attr("boolean",{default:!1}),showArrow:Lyte.attr("boolean",{default:!1}),selectedResource:Lyte.attr("object",{default:null})}},selectedResourceObserver:function(){var t=this.getData("selectedResource"),e=this.getData("resourcesArray"),n=e.indexOf(t);0===n?(this.setData("hidePrevious",!0),this.setData("hideNext",!1)):n===e.length-1?(this.setData("hidePrevious",!1),this.setData("hideNext",!0)):(this.setData("hidePrevious",!1),this.setData("hideNext",!1))}.observes("selectedResource"),resourcesArrayObserver:function(){this.getData("resourcesArray").length>1?this.setData("showArrow",!0):this.setData("showArrow",!1)}.observes("resourcesArray.[]").on("init"),didConnect:function(){var t=this.getData("resourcesArray");this.setData("selectedResource",t[0])},actions:{selectResource:function(t){this.setData("selectedResource",t)},goToNext:function(){var t=this.getData("selectedResource"),e=this.getData("resourcesArray"),n=e.indexOf(t);n<e.length-1&&this.setData("selectedResource",e[n+1])},goToPrev:function(){var t=this.getData("selectedResource"),e=this.getData("resourcesArray"),n=e.indexOf(t);n>0&&this.setData("selectedResource",e[n-1])}}}),Lyte.Component.register("image-editor-preview",{_template:'<template tag-name="image-editor-preview"> <div class="image-show-wrap {{wrapperClassName}}"> <div class="main-image-preview image-preview"> <span class="helper"></span> <img id="photo-in-view" src="{{mainImage}}"> </div> <div class="image-preview left-image-preview"> <template is="if" value="{{leftImage}}"><template case="true"> <span class="helper"></span> <img src="{{leftImage}}"> </template></template> </div> <div class="image-preview right-image-preview"> <template is="if" value="{{rightImage}}"><template case="true"> <span class="helper"></span> <img src="{{rightImage}}"> </template></template> </div> <div class="left-image-nav"> <template is="if" value="{{showLeftNavigation}}"><template case="true"> <div class="sub-nav-icon left-image-icon left-image-nav" onclick="{{action(\'moveFrameLeft\')}}" ontouchstart="{{action(\'moveFrameLeft\')}}"> </div> </template></template> </div> <div class="all-images-wrapper"> <div class="all-images" id="scroll-all-image"> <template is="for" items="{{allImages}}" item="image" index="index"> <div class="image thumbnail" onclick="{{action(\'changeImage\',image)}}" ontouchstart="{{action(\'changeImage\',image)}}"> <template is="if" value="{{expHandlers(image,\'!==\',mainImage)}}"><template case="true"> <div class="overlay"></div> </template></template> <img src="{{image}}"> </div> </template> </div> </div> <div class="right-image-nav"> <template is="if" value="{{showRightNavigation}}"><template case="true"> <div class="sub-nav-icon right-image-icon right-image-nav" onclick="{{action(\'moveFrameRight\')}}" ontouchstart="{{action(\'moveFrameRight\')}}"> </div> </template></template> </div> </div> </template>\n<style>.image-show-wrap {\n\tposition: absolute;\n    top: 0;\n    bottom: 0;\n    width: 100%;\n    text-align: center;\n}\n\n.image-show {\n\tmax-width: 98%;\n    max-height: 99%;\n    vertical-align: middle;\n}\n\n.image-preview {\n    position: absolute;\n    top: 80px;\n    bottom: 136px;\n\twidth: 100%;\n    text-align: center;\n}\n\n.right-image-preview {\n    margin-left: 100%;\n}\n\n.left-image-preview {\n    margin-left: -100%;\n    margin-right: 100%;\n}\n\n.image-preview .helper {\n    height: 100%;\n    vertical-align: middle;\n    display: inline-block;\n}\n\n.image-preview img {\n    max-width: 98%;\n    max-height: 99%;\n    vertical-align: middle;\n}\n\n.all-images-wrapper {\n    position: absolute;\n    bottom: 32px;\n    right: 0;\n    left: 0;\n\theight: 48px;\n    padding-left: 75px;\n    padding-right: 75px;\n    z-index: 10;\n}\n\n.all-images {\n    overflow-x: scroll;\n    overflow-y: hidden;\n    height: 65px;\n    text-align: center;\n    white-space: nowrap;\n\t-webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-overflow-scrolling: touch;\n}\n\n.image {\n    width: 48px;\n    display: inline-block;\n    margin: 0 8px;\n    z-index: 1;\n    position: relative;\n}\n\n.image img {\n    max-width: 48px;\n    max-height: 48px;\n}\n\n.image .overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5)!important;;\n}\n\n.add-description {\n    position: absolute;\n    top: 50%;\n    font-size: 18px;\n    text-align: center;\n    color: #CCC;\n    left: 50%;\n    margin-top: -55px;\n    margin-left: -105px;\n}\n\n.left-image-nav {\n    position: absolute;\n    left: 0;\n    bottom : 32px;\n    width: 75px;\n    height: 50px;\n    z-index: 11;\n    display: inline-block;\n}\n\n.right-image-nav {\n    position: absolute;\n    right: 0;\n    bottom : 32px;\n    width: 75px;\n    height: 50px;\n    z-index: 11;\n    display: inline-block;\n}\n\n.left-image-nav .left-image-icon {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n    position: absolute;\n    left: 0;right: 0;bottom: 0;top: 0;\n    margin: auto;\n    background-size: 40px 80px;\n    background-position: 0px 40px;\n    width : 40px;\n    height: 40px;\n    cursor: pointer;\n}\n\n.right-image-nav .right-image-icon {\n    position: absolute;\n    left: 0;right: 0;bottom: 0;top: 0;\n    margin: auto;\n    background-size: 40px 80px;\n    background-position: 0px 40px;\n    width : 40px;\n    height: 40px;\n    cursor: pointer;\n}\n\n.right-image-nav .right-image-icon:hover {\n    opacity: 0.8;\n    background-position: 0px 40px;\n}\n\n.left-image-nav .left-image-icon:hover {\n    opacity: 0.8;\n    background-position: 0px 40px;\n}\n\n.image-loading {\n    position: absolute;\n    top : 60px;\n    bottom: 45px;\n    left: 0;right: 0;\n    margin : auto;\n    width: 100%;\n    z-index: 1;\n}\n\n.thumbnail-loading {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin : auto;\n    background-color: #000000;\n}\n\n.all-images::-webkit-scrollbar { display: none; }\n.all-images::-o-scrollbar { display: none; }\n\n#image-content {\n\toverflow: hidden;\n}\n\n/* Smartphones ----------- */\n@media screen and (max-device-width : 767px) {\n    .image-show-wrap {\n\t\tbottom: 40px;\n\t}\n}\n\n/* iPads (portrait) ----------- */\n@media (min-device-width: 768px) and (orientation: portrait) {\n\t.image-show-wrap {\n\t\tbottom: 40px;\n\t}\n\n}\n</style>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,3]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[3]}]}},default:{}},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"attr",position:[3]}]}},default:{}},{type:"attr",position:[1,7,1]},{type:"if",position:[1,7,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,9,1,1]},{type:"for",position:[1,9,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,3]}]},{type:"attr",position:[1,11,1]},{type:"if",position:[1,11,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}],_observedAttributes:["showLeftNavigation","showRightNavigation","mainImage","wrapperClassName","allImages","changeImageTo"],data:function(){return{showLeftNavigation:Lyte.attr("boolean",{default:!1}),showRightNavigation:Lyte.attr("boolean",{default:!1}),mainImage:Lyte.attr("string",{default:""}),wrapperClassName:Lyte.attr("string",{default:""}),allImages:Lyte.attr("array",{default:[]}),changeImageTo:Lyte.attr("string",{default:""})}},didConnect:function(){var t=this;$("#scroll-all-image").scroll(function(){var e=document.getElementById("scroll-all-image");0===e.scrollLeft?t.setData("showLeftNavigation",!1):t.setData("showLeftNavigation",!0),e.offsetWidth+e.scrollLeft===e.scrollWidth?t.setData("showRightNavigation",!1):t.setData("showRightNavigation",!0)})},mainImageChanged:function(){var t=this.getData("changeImageTo");isValidString(t)&&this.animateImageChanges(t)}.observes("changeImageTo"),imagesChanged:function(){var t=this.getData("allImages"),e=$("#scroll-all-image").width();isValidString(e)&&64*t.length>e?this.setData("showRightNavigation",!0):this.setData("showRightNavigation",!1),"versionWrapper"===this.getData("wrapperClassName")&&this.resetImagePositions()}.observes("allImages.[]").on("init"),actions:{changeImage:function(t){this.animateImageChanges(t)},moveFrameLeft:function(){var t=$(".all-images").scrollLeft()-$(".all-images-wrapper").width();$(".all-images").animate({scrollLeft:t+"px"})},moveFrameRight:function(){var t=$(".all-images").scrollLeft(),e=$(".all-images-wrapper").width();$(".all-images").animate({scrollLeft:t+e+"px"})}},animateImageChanges:function(t){for(var e,n,i,a=this.getData("allImages"),o=this.getData("mainImage"),r=0;r<a.length;r++)a[r].indexOf(t)>-1&&(e=r,i=a[r]),a[r].indexOf(o)>-1&&(n=r);var s=this;this.resetImagePositions(),this.setData("leftImage",""),this.setData("rightImage","");let l=this.getData("wrapperClassName");setTimeout(function(){e>n?(s.setData("rightImage",i),$("."+l+" .right-image-preview").animate({"margin-left":0},{duration:300,queue:!1}),$("."+l+" .main-image-preview").animate({"margin-left":"-100%","margin-right":"100%"},{duration:300,queue:!1,complete:function(){s.setData("mainImage",i)}})):e<n&&(s.setData("leftImage",i),$("."+l+" .left-image-preview").animate({"margin-left":0,"margin-right":0},{duration:300,queue:!1}),$("."+l+" .main-image-preview").animate({"margin-left":"100%"},{duration:300,queue:!1,complete:function(){s.setData("mainImage",i)}}))},0)},resetImagePositions:function(){let t=this.getData("wrapperClassName");$("."+t+" .main-image-preview").css({"margin-left":"0","margin-right":"0"}),$("."+t+" .right-image-preview").css("margin-left","100%"),$("."+t+" .left-image-preview").css({"margin-left":"-100%","margin-right":"100%"})}}),Lyte.Component.register("file-grid-preview",{_template:'<template tag-name="file-grid-preview"> <div class="file-grid-wrap {{if(operator(sizeLevel,\'===\',0),\'level0\')}} {{if(operator(sizeLevel,\'===\',1),\'level1\')}} {{if(operator(sizeLevel,\'===\',2),\'level2\')}}" style="{{backgroundcolorstyle(card.color,card.defaultColor,card.preview_bgcolor)}}"> <template is="if" value="{{expHandlers(noName,\'!\')}}"><template case="true"> <div class="grid-title file-grid-title" title="{{card.name}}"> {{card.name}} </div> </template></template> <div class="grid-preview {{card.preview_class}}"> <template is="if" value="{{expHandlers(noExtension,\'!\')}}"><template case="true"> <div class="file-extension {{if(operator(sizeLevel,\'===\',1),\'level1\')}}"> {{extension}} </div> </template></template> </div> </div> </template>\n<style>.file-grid-wrap {\n    position: relative;\n}\n\n.file-grid-wrap.level0 {\n    height: 212px;\n    width: 212px;\n}\n\n.file-grid-wrap.level1 {\n    height: 134px;\n    width: 134px;\n}\n\n.file-grid-wrap.level2 {\n    height: 100px;\n    width: 100px;\n}\n\n.file-grid-title {\n\tcolor : #FFFFFF;\n    z-index: 1;\n    padding: 8px 12px;\n}\n\n.grid-preview {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n}\n\n.file-extension {\n\tposition: absolute;\n    left: 0;\n    right: 0;\n    margin: auto;\n    bottom: 25%;\n    text-align: center;\n    color: #FFFFFF;\n}\n\n.file-extension.level1 {\n    font-size: 12px;\n}\n\n.file-createdtime {\n    margin-left: 12px;\n}\n\n.grid-preview.izip-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-zip.png");\n    background-size: cover;\n}\n\n.grid-preview.iaudio-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-audio.png");\n    background-size: cover;\n}\n\n.grid-preview.ipub-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-pdf.png");\n    background-size: cover;\n}\n\n.grid-preview.iimage-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-photo.png");\n    background-size: cover;\n}\n\n.grid-preview.ihtml-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-html.png");\n    background-size: cover;\n}\n\n.grid-preview.icode-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-programmable.png");\n    background-size: cover;\n}\n\n.grid-preview.ivideo-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-video.png");\n    background-size: cover;\n}\n\n.grid-preview.ipdf-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-pdf.png");\n    background-size: cover;\n}\n\n.grid-preview.ipresentation-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-presentation.png");\n    background-size: cover;\n}\n\n.grid-preview.ispreadsheet-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-xls.png");\n    background-size: cover\n}\n\n.grid-preview.idoc-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-doc.png");\n    background-size: cover;\n}\n\n.grid-preview.iunknown-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-unknown.png");\n    background-size: cover;\n}\n\n.grid-preview.ideleted-file {\n    background-image: url("/public/icon-assets/File-Types/icn-file-error.png");\n    background-size: cover;\n}\n</style>',_dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"backgroundcolorstyle",args:["card.color","card.defaultColor","card.preview_bgcolor"]}}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]}},default:{}}],_observedAttributes:["card","noName","noExtension","sizeLevel","extension"],data:function(){return{card:Lyte.attr("object"),noName:Lyte.attr("boolean",{default:!1}),noExtension:Lyte.attr("boolean",{default:!1}),sizeLevel:Lyte.attr("number",{default:0}),extension:Lyte.attr("string")}},init:function(){this.setExtension()},setExtension:function(){var t=this.getData("card");if(t&&t.embed_resources&&t.embed_resources.length>0){var e=t.embed_resources[0].extension;this.setData("extension",e)}}}),Lyte.Component.register("error-component",{_template:'<template tag-name="error-component"> <div id="container"> <div id="topbar"> <div class="notebook-icon"> <div id="notebook-logo"></div> </div> </div> <div id="workspace"> <div id="error-title">{{translate("publicShare.defaultErrorTitle")}}</div> <div id="error-description">{{translate("publicShare.defaultErrorDescription")}}</div> </div> </div> </template>\n<style>\n#container {\n\tposition: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background-color: #F7F7F7;\n\tfont-family: \'Open Sans\';\n}\n\n#topbar {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbackground-color: #ffffff;\n\theight: 48px;\n\twidth: 100%;\n\n\tbox-shadow: 0px 1px 0px 0px rgba(0, 0, 0, 0.1);\n    -webkit-box-shadow: 0px 1px 0px 0px rgba(0, 0, 0, 0.1);\n    -moz-box-shadow: 0px 1px 0px 0px rgba(0, 0, 0, 0.1);\n}\n\n\n#error-title {\n\tcolor: #58595A;\n\ttext-align: center;\n\tfont-size: 42px;\n\tmargin: 32px;\n}\n\n#error-description {\n\tcolor: #58595A;\n\ttext-align: center;\n\tmargin: auto 12px;\n}\n\n#workspace {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tmargin: auto;\n\tmax-width: 700px;\n\tmax-height: 300px;\n}\n\n@media screen and (max-device-width : 767px)  {\n    #error-title {\n\t\tfont-size: 26px;\n\t}\n}\n</style>',_dynamicNodes:[{type:"text",position:[1,3,1,0]},{type:"text",position:[1,3,3,0]}],data:function(){return{}}}),Lyte.Component.register("contact-note-view",{_template:'<template tag-name="contact-note-view"> <div class="spread-parent" id="contact-editor-wrap"> <div class="editor-space contact-editor"> <div id="contact-image-wrapper"> <div id="front-card-image" class="contact-card-image" style="{{backgroundimagestyle(frontImageUrl)}}"></div> <div id="back-card-image" class="contact-card-image" style="{{backgroundimagestyle(backImageUrl)}}"></div> </div> <div id="contact-details-wrapper"> <div class="wrapper-div"> <div id="first-name-div" class="input-div"> <label>{{translate(\'contact.firstName\')}}</label> <div class="value-div">{{contactObject.firstName}}</div> </div> <div id="last-name-div" class="input-div"> <label>{{translate(\'contact.lastName\')}}</label> <div class="value-div">{{contactObject.lastName}}</div> </div> </div> <div id="jobs-div" class="wrapper-div"> <template is="for" items="{{contactObject.jobs}}" item="job" index="index"> <div class="input-div job-div"> <label> {{translate(\'contact.job\')}} </label> <div class="value-div">{{job}}</div> </div> </template> </div> <div id="organizations-div" class="wrapper-div"> <template is="for" items="{{contactObject.organizations}}" item="organization" index="index"> <div class="input-div organization-div"> <label> {{translate(\'contact.organization\')}} </label> <div class="value-div">{{organization}}</div> </div> </template> </div> <div id="numbers-div" class="wrapper-div"> <template is="for" items="{{contactObject.numbers}}" item="number" index="index"> <div class="input-div number-div"> <label> {{translate(\'contact.phone\')}} </label> <div class="value-div">{{number}}</div> </div> </template> </div> <div id="emails-div" class="wrapper-div"> <template is="for" items="{{contactObject.emails}}" item="email" index="index"> <div class="input-div email-div"> <label> {{translate(\'contact.email\')}} </label> <div class="value-div">{{email}}</div> </div> </template> </div> <div id="websites-div" class="wrapper-div"> <template is="for" items="{{contactObject.websites}}" item="website" index="index"> <div class="input-div website-div"> <label> {{translate(\'contact.website\')}} </label> <div class="value-div">{{website}}</div> </div> </template> </div> <div id="addresses-div" class="wrapper-div"> <template is="for" items="{{contactObject.addresses}}" item="address" index="index"> <div class="input-div street-div"> <label> {{translate(\'contact.street\')}} </label> <div class="value-div">{{address.street}}</div> </div> <div class="input-div city-div"> <label> {{translate(\'contact.city\')}} </label> <div class="value-div">{{address.city}}</div> </div> <div class="input-div region-div"> <label> {{translate(\'contact.state\')}} </label> <div class="value-div">{{address.region}}</div> </div> <div class="input-div country-div"> <label> {{translate(\'contact.country\')}} </label> <div class="value-div">{{address.country}}</div> </div> <div class="input-div code-div"> <label> {{translate(\'contact.zip\')}} </label> <div class="value-div">{{address.code}}</div> </div> </template> </div> <div id="socials-div" class="wrapper-div"> <template is="for" items="{{contactObject.socialnetworks}}" item="socialnetwork" index="index"> <div class="input-div social-div"> <label> {{translate(\'contact.social\')}} </label> <div class="value-div">{{socialnetwork}}</div> </div> </template> </div> <div id="notes-div" class="wrapper-div"> <div class="input-div notes-div"> <label> {{translate(\'contact.notes\')}} </label> <div class="value-div">{{contactObject.notes}}</div> </div> </div> </div> </div> </div> </template>\n<style>.contact-editor {\n\tcolor: inherit;\n    overflow: auto;\n    position: absolute;\n    width: 100%;\n    top: 0;\n    left: 0;\n    -ms-overflow-style: none;  /* IE 10+ */\n    /* overflow: -moz-scrollbars-none;  /* Firefox */\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.contact-editor::-webkit-scrollbar {\n    display: none;  /* Safari and Chrome */\n}\n\n#contact-details-wrapper::-webkit-scrollbar {\n\tdisplay: none;  /* Safari and Chrome */\n}\n\n.contact-editor .close {\n\tposition: absolute;\n    top: 0;\n    right: 8px;\n    z-index: 12;\n\n    width: 24px;\n    height: 24px;\n    margin: 16px;\n}\n\n#contact-image-wrapper, #contact-details-wrapper {\n\tposition: absolute;\n    top: 0;\n    bottom: 0;\n    overflow: auto;\n}\n\n#contact-image-wrapper {\n\twidth: 40%;\n    left: 5%\n}\n\n#contact-details-wrapper {\n\tright: 5%;\n    left: 45%;\n}\n\n.input-div {\n\tposition: relative;\n    border-bottom: solid 1px rgba(0, 0, 0, 0.1);\n}\n\n.contact-card-image {\n\twidth: 90%;\n\tposition: relative;\n\tmargin: 24px 0;\n\theight: 180px;\n\tbackground-size: cover;\n\tbackground-repeat: no-repeat;\n}\n\n.input-div label {\n\tcolor: inherit;\n    opacity: 0.25;\n\tfont-size: 11pt;\n\tposition: relative;\n\tfont-family: Open Sans;\n\tpointer-events: none;\n\tdisplay: block;\n\ttransition: 0.2s ease all;\n\t-moz-transition: 0.2s ease all;\n\t-webkit-transition: 0.2s ease all;\n\tmargin: 10px 0;\n}\n\n.value-div {\n\tmargin: 10px 0;\n}\n\n.wrapper-div {\n\tmargin: 40px 0;\n}\n\n.wrapper-div:first-child {\n\tmargin: 0;\n}\n\n#contact-editor-wrap {\n\tleft: 64px;\n\tright: 64px;\n}\n</style>',_dynamicNodes:[{type:"attr",position:[1,1,1,1],attr:{style:{name:"style",helperInfo:{name:"backgroundimagestyle",args:["frontImageUrl"]}}}},{type:"attr",position:[1,1,1,3],attr:{style:{name:"style",helperInfo:{name:"backgroundimagestyle",args:["backImageUrl"]}}}},{type:"text",position:[1,1,3,1,1,1,0]},{type:"text",position:[1,1,3,1,1,3,0]},{type:"text",position:[1,1,3,1,3,1,0]},{type:"text",position:[1,1,3,1,3,3,0]},{type:"attr",position:[1,1,3,3,1]},{type:"for",position:[1,1,3,3,1],dynamicNodes:[{type:"text",position:[1,1,1]},{type:"text",position:[1,3,0]}]},{type:"attr",position:[1,1,3,5,1]},{type:"for",position:[1,1,3,5,1],dynamicNodes:[{type:"text",position:[1,1,1]},{type:"text",position:[1,3,0]}]},{type:"attr",position:[1,1,3,7,1]},{type:"for",position:[1,1,3,7,1],dynamicNodes:[{type:"text",position:[1,1,1]},{type:"text",position:[1,3,0]}]},{type:"attr",position:[1,1,3,9,1]},{type:"for",position:[1,1,3,9,1],dynamicNodes:[{type:"text",position:[1,1,1]},{type:"text",position:[1,3,0]}]},{type:"attr",position:[1,1,3,11,1]},{type:"for",position:[1,1,3,11,1],dynamicNodes:[{type:"text",position:[1,1,1]},{type:"text",position:[1,3,0]}]},{type:"attr",position:[1,1,3,13,1]},{type:"for",position:[1,1,3,13,1],dynamicNodes:[{type:"text",position:[1,1,1]},{type:"text",position:[1,3,0]},{type:"text",position:[3,1,1]},{type:"text",position:[3,3,0]},{type:"text",position:[5,1,1]},{type:"text",position:[5,3,0]},{type:"text",position:[7,1,1]},{type:"text",position:[7,3,0]},{type:"text",position:[9,1,1]},{type:"text",position:[9,3,0]}]},{type:"attr",position:[1,1,3,15,1]},{type:"for",position:[1,1,3,15,1],dynamicNodes:[{type:"text",position:[1,1,1]},{type:"text",position:[1,3,0]}]},{type:"text",position:[1,1,3,17,1,1,1]},{type:"text",position:[1,1,3,17,1,3,0]}],_observedAttributes:["notecard","contactObject","frontImageUrl","backImageUrl"],data:function(){return{notecard:Lyte.attr("object",{default:{}}),contactObject:Lyte.attr("object",{default:{}}),frontImageUrl:Lyte.attr("string",{default:""}),backImageUrl:Lyte.attr("string",{default:""})}},contentObserver:function(){this.parseContactNote()}.observes("notecard.contentXML"),didConnect:function(){this.setData("showEditorOverlay",!1),this.parseContactNote()},parseContactNote:function(){var t=this.getData("notecard"),e=parseContactZnote(t.contentXML,t.notecard_id);this.setData("contactObject",e);var n=findBy(e.cardImages,"type","front");if(isValidObject(n)&&-1!==n){var i=getResourceDownloadUrl(t.notecard_id,n.resource_id)+"?"+getznbcsr();this.setData("frontImageUrl",i)}var a=findBy(e.cardImages,"type","back");if(isValidObject(a)&&-1!==a){i=getResourceDownloadUrl(t.notecard_id,a.resource_id)+"?"+getznbcsr();this.setData("backImageUrl",i)}}},{mixins:["card-util"]}),Lyte.Component.register("alert-box",{_template:'<template tag-name="alert-box"> <div id="alert-box" class="alert-box-wrap"> <div class="alert-box-container"> <div id="alert-message"> </div> <div class="alert-buttons"> <div class="buttons first" id="cancel-button" onclick="{{action(\'cancel\')}}"> </div> <div class="buttons" id="proceed-button" onclick="{{action(\'proceed\')}}"> </div> <div class="buttons" id="ok-button" onclick="{{action(\'cancel\')}}"> </div> </div> </div> </div> </template>\n<style>.alert-box-wrap {\n\tposition: absolute;\n\ttop: -125%;\n\tbottom: 0;\n\tright: 0;\n\tleft: 0;\n\tmax-width: 400px;\n    max-height: 150px;\n\tmargin: auto;\n\tfont-size: 16px;\n\tz-index: 1000011;\n\topacity: 0;\n\n\t-webkit-transition: top 300ms linear, opacity 300ms linear;\n\t-moz-transition: top 300ms linear, opacity 300ms linear;\n\t-o-transition: top 300ms linear, opacity 300ms linear;\n\t-ms-transition: top 300ms linear, opacity 300ms linear;\n\ttransition: top 300ms linear, opacity 300ms linear;\n}\n\n.alert-box-wrap.center {\n\ttop: 0;\n\topacity: 1;\n}\n\n.alert-box-wrap.movedown {\n\ttop: 100%;\n\topacity: 0;\n}\n\n.alert-box-wrap.moveup {\n\ttop: -125%;\n\topacity: 0;\n}\n\n.alert-box-container {\n\tbackground-color: #FFFFFF;\n}\n\n#alert-message {\n\tpadding: 25px 50px;\n    line-height: 24px;\n    text-align: center;\n}\n\n.alert-buttons {\n    position: relative;\n}\n\n.alert-buttons .buttons {\n\tpadding: 12px 0;\n\twidth: 50%;\n\ttext-align: center;\n/*\tborder-right: 1px solid #F0F0F0;*/\n    border-top: 1px solid #F0F0F0;\n    cursor: pointer;\n    display: block;\n    box-sizing: border-box;\n}\n\n.alert-buttons .first {\n    border-right: solid 1px #F0F0F0;\n}\n\n.alert-buttons .buttons:hover {\n\tbackground-color: #F7F7F7;\n}\n\n\n.alert-buttons #cancel-button {\n\tposition: absolute;\n    left: 0;\n    color: #808080;\n}\n\n.alert-buttons #proceed-button {\n\tposition: relative;\n    left: 50%;\n    color: #F0483E;\n}\n\n.buttons.hide {\n\tdisplay: none;\n}\n\n#ok-button {\n\tposition: relative;\n\twidth: 100%! important;\n\tborder-top: 1px solid #F0F0F0;\n\tcolor: #808080;\n    left: 0%;\n}\n\n\n.dimmer.show {\n    opacity: 1;\n    visibility: visible;\n}\n\n#dimmer-for-alert {\n    z-index: 100003;\n}\n</style>',_dynamicNodes:[{type:"attr",position:[1,1,3,1]},{type:"attr",position:[1,1,3,3]},{type:"attr",position:[1,1,3,5]}],_observedAttributes:["dimmerListenerId","globalEventListeners"],data:function(){return{dimmerListenerId:Lyte.attr("string"),globalEventListeners:Lyte.attr("array",{default:[]})}},didConnect:function(){var t,e=document.getElementById("alert-box");(t=transitionEndSupport())&&e.addEventListener(t,function(t){"top"===t.propertyName&&e.classList.contains("movedown")&&resetAlertClass()}),dimmerListenerId=Lyte.addEventListener("alertDimmerClick",function(t){cancelAlert()}),this.setData("dimmerListenerId",dimmerListenerId),addEventListenerTo(this.getData("globalEventListeners"),Lyte.addEventListener("enter",function(t){if(t.preventDefault(),document.querySelector("#alert-box.alert-box-wrap").classList.contains("center"))return okAlert(),!1})),addEventListenerTo(this.getData("globalEventListeners"),Lyte.addEventListener("escKey",function(t){t.preventDefault(),cancelAlert()}))},didDestroy:function(){removeGlobalEventListners(this.getData("globalEventListeners"))},actions:{cancel:function(){cancelAlert()},proceed:function(){okAlert()}}}),Lyte.Component.register("report-abuse-dialog",{_template:'<template tag-name="report-abuse-dialog"> <div id="report-abuse-container"> <div id="report-abuse-title"> <div class="report-abuse-back" onclick="{{action(\'close\')}}">{{translate("options.cancel")}}</div> <span>{{translate("generalOption.reportAbuse")}}</span> <template is="if" value="{{isSendingMail}}"><template case="true"> <div class="report-abuse-button sending show">{{translate("options.sending")}}</div> </template><template case="false"> <div id="report-abuse-send" class="report-abuse-button show" onclick="{{action(\'reportViaEmail\')}}">{{translate("options.send")}}</div> </template></template> </div> <div id="from-field" class="report-field" onfocusout="{{action(\'validateFromField\')}}"> <div id="report-id-label">{{translate("email.email")}} :</div> <template is="if" value="{{invalidUserEmail}}"><template case="true"> <div class="choosen-contact invalid-email"> {{fromValue}} <div class="inote-option cancel-mark inote-option-white iclose-dim" onclick="{{action(\'removeMail\')}}"> </div> </div> </template><template case="false"> <div class="user-report-field input"> <div class="text-input report-abuse-input" id="email-id" contenteditable="true" onkeyup="{{action(\'setInput\',this)}}"></div> </div> </template></template> </div> <div id="subject-field" class="report-field" onfocusout="{{action(\'validateFromField\')}}"> <div id="report-id-label">{{translate("email.subject")}} :</div> <div class="user-report-field input"> <div class="text-input report-abuse-input" id="subject" contenteditable="true">{{translate("reportAbuse.subject")}}</div> </div> </div> <div id="report-abuse-message" contenteditable="true" onkeydown="{{action(\'keyDownAction\',event)}}"> <br>{{translate("reportAbuse.hiThere")}},<br> <br>{{translate("reportAbuse.reportContent")}}:<br> <br>{{reportLink}}<br> <br>{{translate("reportAbuse.thanks")}} <br> </div> </div> </template>\n<style>#report-abuse-container{\n\tposition: absolute;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    width: 500px;\n    height: 400px;\n    box-sizing: border-box;\n    margin: auto;\n    font-size: 16px;\n    overflow:auto;\n    color:#000;\n    z-index: 1000002;\n    font-family: \'Lato\' ! important;\n    background-color: #FFFFFF;\n    -webkit-transition: all 300ms linear;\n    -moz-transition: all 300ms linear;\n    -o-transition: all 300ms linear;\n    -ms-transition: all 300ms linear;\n    transition: all 300ms linear;\n    -webkit-box-shadow: 0 0 15px 0 rgba(0,0,0,.2);\n    -moz-box-shadow: 0 0 15px 0 rgba(0,0,0,.2);\n    box-shadow: 0 0 15px 0 rgba(0,0,0,.2);\n    border-radius: 4px;\n    box-shadow: 0px 0px 15px 0px rgba(0, 0, 0, 0.2);\n    -webkit-box-shadow: 0px 0px 15px 0px rgba(0, 0, 0, 0.2);\n    -moz-box-shadow: 0px 0px 15px 0px rgba(0, 0, 0, 0.2);\n}\n\n\n#report-abuse-container::-webkit-scrollbar{\n    display: none;\n}\n\n#report-abuse-title{\n\tline-height: 28px;\n    position: relative;\n    text-align: center;\n    padding: 12px 25px;\n    box-sizing: border-box;\n    font-size: 18px;\n    font-weight: 600;\n    border-bottom: 1px solid #e9e9e9;\n}\n\n#report-abuse-close{\n\tposition: absolute;\n    right: 0px;\n    top: 0px;\n}\n\n\n.report-abuse-input{\n    font-size: 14px;\n    border: none;\n    margin-left: 10px;\n    outline: none;\n}\n\n.report-field{\n    position: relative;\n\tword-break: break-word;\n    padding: 0 18px;\n    border-bottom: 1px solid #eee;\n\theight: 40px;\n}\n\n\n#report-abuse-container .user-report-field {\n\tdisplay: inline-block;\n    overflow: auto;\n    font-size: 14px!important;\n\theight: 40px;\n\tline-height: 40px;\n\twidth: 85%;\n}\n\n#report-abuse-container .user-report-field::-webkit-scrollbar {\n\tdisplay: none;\n}\n\n#report-abuseTo-label{\n    position: absolute;\n    color: grey;\n    top: 50%;\n    height: 20px;\n    font-size: 14px;\n    margin: -10px 0 0;\n    display: inline-block;\n}\n\n#report-abuse-message{\n\tz-index: auto;\n    position: relative;\n    line-height: normal;\n    font-size: 14px;\n    width:98%;\n    height:200px;\n    border:none;\n    outline: none;\n    transition: none;\n    padding:5px 20px;\n    box-sizing: border-box;\n    overflow: scroll;\n    background: transparent !important;\n}\n\n#report-abuse-message::-webkit-scrollbar{\n\tdisplay: none;\n}\n\n.report-abuse-button{\n\tposition: absolute;\n    right: 15px;\n    top: 10px;\n    height: 32px;\n    font-size: 14px;\n    line-height: 32px;\n    font-weight: 400;\n    opacity: 0.3;\n    width: 60px;\n    text-align: center;\n    color: #fff!important;\n    background-color: #3b9eff;\n    border-radius: 3px;\n    cursor: pointer;\n}\n\n.report-abuse-button.sending{\n    background-color: transparent!important;\n    color: #3b9eff!important;\n}\n\n.report-abuse-button.show{\n    opacity: 1 !important;\n}\n\n.report-abuse-back{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 16px;\n\tmargin: 0px 0px! important;\n\tfont-weight: normal;\n\tfont-size: 14px;\n\tbottom: 0;\n\tline-height: 52px;\n\tcursor: pointer;\n}\n\n.highlight-report-abuse {\n    color: #000! important;\n}\n\n\n#success-toast{\n    color: #3b9eff;\n    text-align: center;\n    box-sizing: border-box;\n    padding: 25% 10%;\n}\n\n#report-id-label {\n\tdisplay: inline-block;\n\tline-height: 40px;\n\theight: 40px;\n\tmargin: 0;\n\tvertical-align: top;\n}\n\n.choosen-contact {\n\tposition: relative;\n    left: 10px;\n    z-index: 2;\n    line-height: 23px;\n    padding-left: 10px;\n    padding-bottom: 2px;\n    padding-right: 15px;\n    margin-right: 8px;\n    margin-top: 7px;\n    display: inline-block;\n    cursor: pointer;\n    border-radius: 13px;\n    background-color: #F5F5F5;\n    border: 1px solid #E1E1E1;\n}\n\n.choosen-contact.invalid-email {\n\tbackground-color: #900;\n    color: #FFFFFF;\n}\n\n.choosen-contact .cancel-mark {\n\tposition: relative;\n    top: 7px;\n    left: 5px;\n    width: 12px;\n    height: 12px;\n    float: right;\n    margin: 0;\n    background-position: -95px 0px;\n    background-size: 213px 24px;\n}\n\n.cancel-mark.iclose-dark:hover,.cancel-mark.iclose-dim:hover {\n    background-position: -95px -36px!important;\n}\n\n.inote-option {\n    width: 24px;\n    height: 24px;\n    background-size: 648px 48px;\n    cursor: pointer;\n}\n\n.inote-option.idownload-dim {\n    background-position: -336px -24px;\n}\n\n.inote-option.idownload-dim:hover {\n    background-position: -336px 0;\n}\n\n/* Smartphones ----------- */\n@media screen and (max-device-width : 767px) {\n    #report-abuse-container {\n        width: 100%!important;\n    }\n\n\t#report-abuse-container .user-report-field {\n\t\tmax-width: 75%;\n\t    text-overflow: ellipsis;\n\t    overflow: hidden;\n\t}\n}\n\n/* iPads (portrait) ----------- */\n@media (min-device-width: 768px) and (orientation: portrait) {\n\n    #report-abuse-container {\n        width: 100%!important;\n    }\n\n\t#report-abuse-container .user-report-field {\n\t\tmax-width: 75%;\n\t    text-overflow: ellipsis;\n\t    overflow: hidden;\n\t}\n}\n</style>',_dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,1,0]},{type:"text",position:[1,1,3,0]},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1,0]},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"attr",position:[1,3]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"text",position:[1,5,1,0]},{type:"text",position:[1,5,3,1,0]},{type:"attr",position:[1,7]},{type:"text",position:[1,7,2]},{type:"text",position:[1,7,7]},{type:"text",position:[1,7,12]},{type:"text",position:[1,7,17]}],_observedAttributes:["subject","notecard","reportLink","invalidUserEmail","fromValue","isSendingMail","globalEventListeners"],data:function(){return{subject:Lyte.attr("string"),notecard:Lyte.attr("object"),reportLink:Lyte.attr("string",{default:window.location.href}),invalidUserEmail:Lyte.attr("boolean",{default:!1}),fromValue:Lyte.attr("string",{default:""}),isSendingMail:Lyte.attr("boolean",{default:!1}),globalEventListeners:Lyte.attr("array",{default:[]})}},didConnect:function(){makeInputFieldFocus("#from-field .text-input"),this.setData("fromValue",""),addEventListenerTo(this.getData("globalEventListeners"),Lyte.addEventListener("enter",function(t){if("report-abuse-message"===t.target.id)return document.execCommand("insertHTML",!1,"<br><br>"),!1}))},resetEmailField:function(){this.setData("fromValue",""),this.setData("isSendingMail",!1),this.setData("invalidUserEmail",!1)},actions:{close:function(){this.resetEmailField(),this.throwEvent("reportAbuse")},setInput:function(t){var e=this;setTimeout(function(){e.setData("fromValue",t.innerText)},0)},removeMail:function(){this.resetEmailField()},validateFromField:function(){this.validateFromEmail()},reportViaEmail:function(){if(this.getData("invalidUserEmail"))return this.setData("isSendingMail",!1),void showAlert(translate.toastMessage.enterValidMail,!1,null,translate.options.okay,"#808080");this.setData("isSendingMail",!0);var t=this.getData("fromValue");if(!isValidString(t))return this.setData("isSendingMail",!1),void showAlert(translate.toastMessage.enterValidMail,!1,null,translate.options.okay,"#808080");t=t.trim();var e=document.getElementById("subject"),n=e.innerText?e.innerText:e.textContent;isValidString(n)||(n=translate.reportAbuse.subject);var i={sender:t,subject:n,content:document.getElementById("report-abuse-message").innerHTML.trim().replace(/<br>/g,"\r\n")},a=new FormData;a.append("JSONString",JSON.stringify(i));var o=this;reportAbuseNR(a).then(function(t){"success"===JSON.parse(t).status.toLowerCase()?(o.resetEmailField(),o.throwEvent("reportAbuse"),displayToast(translate.toastMessage.reportSuccess)):(o.setData("isSendingMail",!1),showAlert(translate.toastMessage.reportAbuseFailed,!1,null,translate.options.okay,"#808080"))}).catch(function(t){o.setData("isSendingMail",!1),showAlert(translate.toastMessage.reportAbuseFailed,!1,null,translate.options.okay,"#808080")})},keyDownAction:function(t){switch(t.keyCode){case 13:Lyte.triggerEvent("enter",t)}}},validateFromEmail:function(){var t=this.getData("fromValue");validateEmail(t.trim())?this.setData("invalidUserEmail",!1):isValidString(t)?this.setData("invalidUserEmail",!0):this.setData("invalidUserEmail",!1)}});